<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WoW Tooltip Creator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        /* --- CORE VARIABLES --- */
        :root {
            --bg-color: #121212;
            --panel-bg: #1b1b1b;
            --text-color: #e0e0e0;
            --accent-color: #e66306;
            --border-color: #333;
            /* WoW Quality Colors */
            --q-poor: #9d9d9d; --q-common: #ffffff; --q-uncommon: #1eff00;
            --q-rare: #0070dd; --q-epic: #a335ee; --q-legendary: #ff8000;
            --q-artifact: #e6cc80; --q-heirloom: #00ccff;
            /* Tooltip Specifics */
            --classic-bg: rgba(5, 5, 5, 0.9);
            --retail-bg: rgba(12, 12, 20, 0.95);
        }

        /* --- GLOBAL RESET --- */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            height: 100vh;
            display: flex;
            overflow: hidden;
        }

        /* --- SCROLLBAR --- */
        .controls-panel::-webkit-scrollbar { width: 10px; }
        .controls-panel::-webkit-scrollbar-track { background: #1b1b1b; }
        .controls-panel::-webkit-scrollbar-thumb { background: #e66306; border-radius: 5px; }
        .controls-panel { scrollbar-width: thin; scrollbar-color: #e66306 #1b1b1b; }

        /* --- LAYOUT --- */
        .container { display: flex; width: 100%; height: 100%; flex-direction: row; }
        .controls-panel { width: 450px; background-color: var(--panel-bg); border-right: 1px solid var(--border-color); padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 15px; flex-shrink: 0; }
        .preview-panel { flex: 1; background-color: #111; background-image: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://upload.wikimedia.org/wikipedia/commons/thumb/1/18/World_of_Warcraft_Logo.svg/1200px-World_of_Warcraft_Logo.svg.png'); background-size: cover; background-position: center; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 40px; position: relative; }

        @media (max-width: 900px) {
            .container { flex-direction: column; }
            .preview-panel { order: 1; height: 50vh; flex: none; border-bottom: 1px solid var(--border-color); padding: 40px 20px; overflow: hidden; }
            .controls-panel { order: 2; width: 100%; height: 50vh; border-right: none; padding: 20px 20px 60px 20px; }
            #tooltip-render-area { transform: scale(0.75); }
            .copyright-text { display: none !important; }
        }

        /* --- UI COMPONENTS --- */
        .settings-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .settings-grid.triple { grid-template-columns: 1.5fr 1fr; }
        h2 { font-size: 1.2rem; margin-bottom: 5px; color: var(--accent-color); }
        h3 { font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; color: #888; margin-top: 10px; margin-bottom: 6px; border-bottom: 1px solid #333; padding-bottom: 3px; }
        .btn-group { display: flex; background: #000; border-radius: 6px; padding: 3px; gap: 3px; }
        .btn-toggle { flex: 1; background: transparent; border: none; color: #777; padding: 6px 4px; cursor: pointer; border-radius: 4px; font-weight: 600; font-size: 0.75rem; transition: all 0.2s; white-space: nowrap; }
        .btn-toggle:hover { color: #fff; background: #222; }
        .btn-toggle.active { background: var(--accent-color); color: #fff; box-shadow: 0 1px 3px rgba(0,0,0,0.5); }
        .form-group { margin-bottom: 8px; }
        .label-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px; }
        label { display: block; font-size: 0.8rem; color: #aaa; margin-bottom: 3px; }
        input[type="checkbox"] { width: auto !important; cursor: pointer; accent-color: var(--accent-color); margin-right: 8px; }
        input[type="text"], input[type="number"], select, textarea { width: 100%; background: #111; border: 1px solid #333; color: #fff; padding: 6px 8px; border-radius: 4px; font-size: 0.85rem; }
        select#inp-quality option { background: #111; font-weight: bold; }
        input:focus, select:focus, textarea:focus { outline: none; border-color: var(--accent-color); }
        textarea { resize: vertical; min-height: 60px; font-family: inherit; }
        .hidden { display: none !important; }

        /* --- COLORS & STATS --- */
        .q-poor { color: var(--q-poor) !important; } .q-common { color: var(--q-common) !important; } .q-uncommon { color: var(--q-uncommon) !important; }
        .q-rare { color: var(--q-rare) !important; } .q-epic { color: var(--q-epic) !important; } .q-legendary { color: var(--q-legendary) !important; }
        .q-artifact { color: var(--q-artifact) !important; } .q-heirloom { color: var(--q-heirloom) !important; }
        .stats-builder { background: #111; border: 1px solid #333; border-radius: 4px; padding: 8px; }
        .stat-row { display: flex; align-items: center; margin-bottom: 6px; justify-content: space-between; }
        .stat-check { display: flex; align-items: center; cursor: pointer; color: #ccc; font-size: 0.85rem; flex: 1; }
        .stat-input { width: 65px !important; padding: 4px 6px !important; height: 26px; font-size: 0.8rem !important; }
        .class-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 6px; background: #111; border: 1px solid #333; padding: 8px; border-radius: 4px; }
        .class-checkbox { display: flex; align-items: center; color: #ccc; font-size: 0.75rem; cursor: pointer; }
        .btn-add-stat, .btn-add-line { background: #333; color: #ccc; border: 1px dashed #555; width: 100%; padding: 6px; margin-top: 5px; cursor: pointer; font-size: 0.8rem; border-radius: 4px; }
        .custom-stat-row { display: flex; gap: 5px; margin-top: 5px; align-items: center; }
        .custom-val-input { width: 60px !important; }

        /* --- ICON PICKER & MODAL --- */
        .icon-picker-row { display: flex; gap: 8px; }
        .btn-icon-action { flex: 1; padding: 8px; background: #222; border: 1px solid #444; color: #e0e0e0; border-radius: 4px; cursor: pointer; font-size: 0.8rem; display: flex; align-items: center; justify-content: center; }
        .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.85); z-index: 9999; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .modal-content { background: #1a1a1a; border: 1px solid #444; width: 90%; max-width: 600px; height: 80%; border-radius: 8px; display: flex; flex-direction: column; padding: 20px; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; border-bottom: 1px solid #333; padding-bottom: 10px; }
        
        .modal-toolbar { display: flex; gap: 10px; margin-bottom: 10px; }
        .btn-back { background: #333; border: 1px solid #555; color: #fff; padding: 5px 10px; cursor: pointer; border-radius: 4px; font-weight: bold; }
        .btn-back:hover { background: #444; }

        .icon-grid {
            flex: 1;
            overflow-y: auto;
            display: grid;
            grid-template-columns: repeat(auto-fill, 64px);
            grid-auto-rows: 64px;
            gap: 10px;
            padding: 10px;
            background: #111;
            border: 1px solid #333;
            align-content: start; }
        
        /* Icon Items */
        .icon-option { width: 100%; height: 100%; position: relative; background: #000; border: 1px solid #333; cursor: pointer; aspect-ratio: 1 / 1; overflow: hidden; display: flex; align-items: center; justify-content: center; }
        .icon-option img { width: 100%; height: 100%; object-fit: cover; }
        .icon-option:hover { border-color: var(--accent-color); z-index: 1; }

        /* Folder Items */
        .folder-option { display: flex; flex-direction: column; align-items: center; justify-content: center; background: #222; border: 1px solid #444; aspect-ratio: 1 / 1; cursor: pointer; color: #ccc; font-size: 0.8rem; text-align: center; padding: 5px; }
        .folder-option:hover { background: #333; color: #fff; border-color: var(--accent-color); }
        .folder-icon { font-size: 24px; margin-bottom: 5px; color: #ffd100; }

        .btn-download { background: var(--accent-color); color: #fff; border: none; padding: 10px; width: 100%; font-weight: bold; cursor: pointer; border-radius: 4px; }

        /* --- TOOLTIP RENDER --- */
        @import url('https://fonts.googleapis.com/css2?family=Merriweather:wght@300;400;700&family=Open+Sans:wght@400;600;700&display=swap');
        #tooltip-render-area { position: relative; padding: 20px; display: inline-block; }
        .tooltip-wrapper { display: flex; align-items: flex-start; gap: 5px; }
        .tooltip-icon-container { width: 56px; height: 56px; flex-shrink: 0; position: relative; }
        .tooltip-icon { width: 100%; height: 100%; object-fit: cover; border-radius: 4px; }
        .wow-tooltip { width: 350px; min-height: 100px; padding: 12px; border-radius: 4px; position: relative; box-shadow: 0 4px 20px rgba(0,0,0,0.8); cursor: default; user-select: none; }
        
        /* Styles */
        .font-classic { font-family: 'Merriweather', serif; }
        .font-classic .tooltip-title { font-weight: 700; text-shadow: 1px 1px 0 #000; letter-spacing: 0.5px; }
        .font-retail { font-family: 'Open Sans', sans-serif; }
        .font-retail .tooltip-title { letter-spacing: 0.5px; font-weight: 600; text-shadow: 1px 1px 2px #000; }
        .border-classic { background-color: var(--classic-bg); border: 2px solid #a8a8a8; border-color: #cfcfcf #505050 #505050 #cfcfcf; }
        .border-retail { background-color: var(--retail-bg); border: 1px solid #555; box-shadow: 0 0 0 1px #000, 0 0 10px rgba(0,0,0,0.5); }
        .border-classic-icon .tooltip-icon { border: 1px solid #aaa; border-radius: 0; }
        .border-retail-icon .tooltip-icon { border: 1px solid #333; }

        /* Tooltip Content */
        .tooltip-header { display: flex; gap: 12px; margin-bottom: 2px; }
        .tooltip-text-col { display: flex; flex-direction: column; justify-content: center; width: 100%; }
        .tooltip-title { font-size: 18px; margin-bottom: 2px; line-height: 1.2; }
        .tooltip-sub { font-size: 13px; color: #fff; margin-bottom: 4px; }
        .text-right { float: right; }
        .line-group { font-size: 13px; color: #ffd100; line-height: 1.5; }
        .line-white { color: #fff; } .line-green { color: #1eff00; } .line-gold { color: #ffd100; } .line-grey { color: #9d9d9d; }
        .line-flavor { color: #ffd100; font-style: italic; margin-top: 10px; opacity: 0.9; }
        .stat-line { display: flex; justify-content: space-between; color: #fff; font-size: 13px; }
        .item-property { display: block; }
        .socket-row { display: flex; align-items: center; gap: 6px; color: #9d9d9d; font-size: 13px; margin-bottom: 2px; }
        .socket-box { width: 14px; height: 14px; border: 1px solid #333; flex-shrink: 0; }
        .classic-helper { background: #191919; border: 1px solid #333; padding: 10px; border-radius: 4px; margin-bottom: 10px; }
        .helper-row { display: flex; gap: 5px; margin-top: 5px; }

    </style>
</head>
<body>

    <div class="container">
        <div class="controls-panel">
            <h2>WoW Tooltip Creator</h2>
            
            <div class="settings-grid triple">
                <div>
                    <h3>Base Type</h3>
                    <div class="btn-group" id="group-base">
                        <button class="btn-toggle active" onclick="setBase('item')">Item</button>
                        <button class="btn-toggle" onclick="setBase('spell')">Spell</button>
                        <button class="btn-toggle" onclick="setBase('talent')">Talent</button>
                    </div>
                </div>
                <div>
                    <h3>Data Mode</h3>
                    <div class="btn-group" id="group-era">
                        <button class="btn-toggle active" onclick="setEra('classic')">Classic</button>
                        <button class="btn-toggle" onclick="setEra('retail')">Modern</button>
                    </div>
                </div>
            </div>

            <div class="settings-grid">
                <div>
                    <h3>Border</h3>
                    <div class="btn-group" id="group-border">
                        <button class="btn-toggle" onclick="setBorder('classic')">Classic</button>
                        <button class="btn-toggle active" onclick="setBorder('retail')">Modern</button>
                    </div>
                </div>
                <div>
                    <h3>Font</h3>
                    <div class="btn-group" id="group-font">
                        <button class="btn-toggle" onclick="setFont('classic')">Classic</button>
                        <button class="btn-toggle active" onclick="setFont('retail')">Modern</button>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>Name</label>
                <input type="text" id="inp-name" value="The Guild-Forge Gavel" oninput="updateTooltip()">
            </div>

            <div class="form-group">
                <label>Icon</label>
                <div class="icon-picker-row">
                    <button class="btn-icon-action" style="background: var(--accent-color); color: #fff; border: none;" onclick="openIconModal()">Library</button>
                    <label class="btn-icon-action" style="background: #1b1b1b; color: #aaa;">
                        Upload
                        <input type="file" id="inp-icon-file" accept="image/*" onchange="handleIconUpload()" hidden>
                    </label>
                </div>
            </div>

            <div class="form-group" id="group-quality">
                <label>Quality</label>
                <select id="inp-quality" onchange="updateTooltip()">
                    <option value="q-poor" style="color: var(--q-poor)">Poor</option>
                    <option value="q-common" style="color: var(--q-common)">Common</option>
                    <option value="q-uncommon" style="color: var(--q-uncommon)">Uncommon</option>
                    <option value="q-rare" style="color: var(--q-rare)">Rare</option>
                    <option value="q-epic" style="color: var(--q-epic)">Epic</option>
                    <option value="q-legendary" style="color: var(--q-legendary)" selected>Legendary</option>
                    <option value="q-artifact" style="color: var(--q-artifact)">Artifact</option>
                    <option value="q-heirloom" style="color: var(--q-heirloom)">Heirloom</option>
                </select>
            </div>

            <div id="fields-item">
                <div class="settings-grid">
                    <div class="form-group">
                        <div class="label-row"><label>iLvl</label><input type="checkbox" id="chk-ilvl" checked onchange="updateTooltip()"></div>
                        <input type="text" id="inp-ilvl" value="67" oninput="updateTooltip()">
                    </div>
                    <div class="form-group">
                        <label>Binding</label>
                        <select id="inp-binding" onchange="updateTooltip()">
                            <option value="Binds when picked up" selected>BoP</option>
                            <option value="Binds when equipped">BoE</option>
                            <option value="Binds to Account">Account</option>
                            <option value="">None</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>Category</label>
                    <select id="inp-category" onchange="handleCategoryChange()">
                        <option value="weapon" selected>Weapon</option>
                        <option value="armor">Armor</option>
                        <option value="jewelry">Jewelry</option>
                        <option value="relic">Relic</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div id="cat-armor" class="hidden">
                    <div class="settings-grid">
                        <div class="form-group"><label>Material</label><select id="inp-armor-material" onchange="updateTooltip()"><option>Cloth</option><option>Leather</option><option>Mail</option><option>Plate</option></select></div>
                        <div class="form-group"><label>Slot</label><select id="inp-armor-slot" onchange="updateTooltip()"><option>Head</option><option>Shoulder</option><option>Chest</option><option>Waist</option><option>Legs</option><option>Feet</option></select></div>
                    </div>
                </div>

                <div id="cat-weapon" class="form-group">
                    <label>Weapon Type</label>
                    <select id="inp-weapon-type" onchange="updateTooltip()">
                        <optgroup label="One-Handed">
                            <option value="One-Hand Mace" selected>One-Hand Mace</option>
                            <option value="One-Hand Sword">One-Hand Sword</option>
                            <option value="One-Hand Axe">One-Hand Axe</option>
                            <option value="Dagger">Dagger</option>
                            <option value="Fist Weapon">Fist Weapon</option>
                        </optgroup>
                        <optgroup label="Two-Handed">
                            <option value="Polearm">Polearm</option>
                            <option value="Two-Hand Sword">Two-Hand Sword</option>
                            <option value="Two-Hand Axe">Two-Hand Axe</option>
                            <option value="Two-Hand Mace">Two-Hand Mace</option>
                            <option value="Staff">Staff</option>
                        </optgroup>
                        <optgroup label="Ranged">
                            <option value="Bow">Bow</option>
                            <option value="Crossbow">Crossbow</option>
                            <option value="Gun">Gun</option>
                            <option value="Wand">Wand</option>
                            <option value="Thrown">Thrown</option>
                        </optgroup>
                    </select>
                </div>

                <div id="cat-jewelry" class="form-group hidden">
                    <label>Jewelry Type</label>
                    <select id="inp-jewelry-type" onchange="updateTooltip()">
                        <option value="Neck">Neck</option>
                        <option value="Finger">Ring</option>
                        <option value="Trinket">Trinket</option>
                    </select>
                </div>

                <div id="cat-relic" class="form-group hidden">
                    <label>Relic Type</label>
                    <select id="inp-relic-type" onchange="updateTooltip()">
                        <option value="Libram">Libram</option>
                        <option value="Idol">Idol</option>
                        <option value="Totem">Totem</option>
                        <option value="Sigil">Sigil</option>
                    </select>
                </div>

                <div id="cat-other" class="form-group hidden">
                    <label>Type</label>
                    <select id="inp-other-type" onchange="updateTooltip()">
                        <option value="Cloak">Cloak</option>
                        <option value="Shield">Shield</option>
                        <option value="Held In Off-hand">Held In Off-hand</option>
                        <option value="Shirt">Shirt</option>
                        <option value="Tabard">Tabard</option>
                        <option value="Miscellaneous">Miscellaneous</option>
                    </select>
                </div>
                
                <div class="form-group hidden" id="group-armor">
                    <label>Armor Amount</label>
                    <input type="number" id="inp-armor" placeholder="e.g. 500" oninput="updateTooltip()">
                </div>

                <div class="form-group" id="group-weapon-stats">
                    <div class="label-row"><label>Weapon Stats</label><div><input type="checkbox" id="chk-show-dps" checked onchange="updateTooltip()"><span style="font-size:0.7rem; color:#888;">DPS</span></div></div>
                    <div style="display: flex; gap: 5px;">
                        <input type="text" id="inp-dmg-min" placeholder="Min" value="33" oninput="updateTooltip()">
                        <input type="text" id="inp-dmg-max" placeholder="Max" value="57" oninput="updateTooltip()">
                        <input type="text" id="inp-speed" placeholder="Spd" value="2.60" oninput="updateTooltip()">
                    </div>
                </div>

                <h3>Stats</h3>
                <div class="stats-builder" id="stats-container"></div>
                <div id="custom-stats-container"></div>
                <button class="btn-add-stat" onclick="addCustomStat()">+ Custom Stat</button>

                <h3>Sockets</h3>
                <div class="form-group">
                    <div style="display: flex; gap: 5px;">
                        <select class="inp-socket" onchange="updateTooltip()"><option value="">None</option><option>Red</option><option>Yellow</option><option>Blue</option><option>Green</option><option>Purple</option><option>Orange</option><option>Meta</option></select>
                        <select class="inp-socket" onchange="updateTooltip()"><option value="">None</option><option>Red</option><option>Yellow</option><option>Blue</option><option>Green</option><option>Purple</option><option>Orange</option><option>Meta</option></select>
                        <select class="inp-socket" onchange="updateTooltip()"><option value="">None</option><option>Red</option><option>Yellow</option><option>Blue</option><option>Green</option><option>Purple</option><option>Orange</option><option>Meta</option></select>
                    </div>
                </div>
                <div class="form-group">
                    <div class="label-row"><label>Socket Bonus</label><input type="checkbox" id="chk-socket-bonus" onchange="updateTooltip()"></div>
                    <input type="text" id="inp-socket-bonus" value="+5 Strength" oninput="updateTooltip()">
                </div>
                
                <div class="form-group"><label>Durability</label><input type="text" id="inp-durability" value="100 / 100" oninput="updateTooltip()"></div>
            </div>

            <div id="fields-spell" class="hidden">
                <h3>Spell Details</h3>
                <div class="settings-grid">
                    <div class="form-group"><label>Rank</label><input type="text" id="inp-rank" value="Rank 1" oninput="updateTooltip()"></div>
                    <div class="form-group"><label>Cost</label><input type="text" id="inp-cost" value="100 Mana" oninput="updateTooltip()"></div>
                </div>
                <div class="settings-grid">
                    <div class="form-group"><label>Range</label><input type="text" id="inp-range" value="40 yd range" oninput="updateTooltip()"></div>
                    <div class="form-group"><label>Cast</label><input type="text" id="inp-cast" value="Instant" oninput="updateTooltip()"></div>
                </div>
                <div class="form-group"><label>Cooldown</label><input type="text" id="inp-cooldown" value="6 sec cooldown" oninput="updateTooltip()"></div>
            </div>

            <h3>Effects & Description</h3>
            <div id="classic-effect-helper" class="classic-helper hidden">
                <select id="inp-classic-type" style="margin-bottom: 5px;">
                    <option value="spell">Spell Dmg (Magical)</option>
                    <option value="heal">Healing Power</option>
                    <option value="spellcrit">Spell Crit %</option>
                    <option value="meleecrit">Melee Crit %</option>
                    <option value="hit">Hit %</option>
                    <option value="dodge">Dodge %</option>
                    <option value="parry">Parry %</option>
                    <option value="block">Block %</option>
                    <option value="mp5">MP5 (Mana/5s)</option>
                    <option value="ap">Attack Power</option>
                </select>
                <div class="helper-row">
                    <input type="number" id="inp-classic-val" placeholder="Value" style="flex:1">
                    <button class="btn-add-line" onclick="addClassicEffect()" style="margin:0; width:60px;">Add</button>
                </div>
            </div>

            <div class="form-group">
                <select id="inp-effect-trigger" onchange="updateTooltip()"><option value="">No Trigger</option><option value="Equip: " selected>Equip</option><option value="Use: ">Use</option><option value="Chance on hit: ">Chance on hit</option></select>
            </div>
            <div class="form-group"><textarea id="inp-effect" oninput="updateTooltip()">Increases the strength of your Guild’s unity by 50.</textarea></div>
            <div class="form-group"><label>Flavor (Gold)</label><textarea id="inp-flavor" rows="2" oninput="updateTooltip()">"You're the closest to heaven that I'll ever be..."</textarea></div>
            
            <div class="form-group"><label style="font-size: 0.8rem; color: #888; margin-bottom: 5px; display: block;">Classes (Optional)</label><div id="class-selector-container" class="class-grid"></div></div>

            <div class="form-group" id="group-req">
                <div class="label-row"><label>Level Req</label><input type="checkbox" id="chk-req" checked onchange="updateTooltip()"></div>
                <input type="text" id="inp-req" value="Requires Level 60" oninput="updateTooltip()">
            </div>

            <div class="action-bar"><button class="btn-download" onclick="downloadTooltip()">Download PNG</button></div>
            <div style="height: 40px;"></div>
        </div>

        <div class="preview-panel">
            <div id="tooltip-render-area">
                <div id="tooltip-wrapper" class="tooltip-wrapper border-retail-icon">
                    <div class="tooltip-icon-container">
                        <img id="display-icon" src="" class="tooltip-icon">
                    </div>
                    <div id="tooltip-box" class="wow-tooltip border-retail font-retail">
                        <div class="tooltip-header">
                            <div class="tooltip-text-col">
                                <div id="display-name" class="tooltip-title q-legendary">The Guild-Forge Gavel</div>
                                <div id="display-rank" class="tooltip-sub hidden"></div>
                                <div id="display-ilvl" class="line-gold">Item Level 67</div>
                                <div id="display-binding" class="line-white">Binds when picked up</div>
                            </div>
                        </div>
                        <div id="section-item-type" class="line-group line-white"><span id="display-slot">One-Hand</span><span id="display-subtype" class="text-right">Mace</span></div>
                        <div id="display-armor" class="line-group line-white hidden"></div>
                        <div id="section-weapon" class="line-group line-white">
                            <div class="stat-line"><span id="display-dmg">33 - 57 Damage</span><span id="display-speed">Speed 2.60</span></div>
                            <div class="stat-line"><span id="display-dps"></span></div>
                        </div>
                        <div id="section-spell-details" class="line-group line-white hidden">
                            <div class="stat-line"><span id="display-cost"></span><span id="display-range"></span></div>
                            <div class="stat-line"><span id="display-cast"></span><span id="display-cd"></span></div>
                        </div>
                        <div id="display-stats" class="line-group line-white"></div>
                        <div id="display-sockets" class="line-group"></div>
                        <div id="display-socket-bonus" class="line-group line-grey hidden"></div>
                        <div id="display-durability" class="line-group line-white"></div>
                        <div id="display-classes" class="line-group line-white"></div>
                        <div id="display-req" class="line-group line-white">Requires Level 60</div>
                        <div id="display-effect" class="line-group line-green" style="margin-top: 5px; margin-bottom: 10px;"></div>
                        <div id="display-flavor" class="line-group line-flavor">"You're the closest to heaven that I'll ever be..."</div>
                    </div>
                </div>
            </div>
            <p class="copyright-text" style="margin-top:20px; color:#666; font-size:12px; text-align: center; max-width: 400px; line-height: 1.4;">
                World of Warcraft, Warcraft and Blizzard Entertainment are trademarks or registered trademarks of Blizzard Entertainment, Inc. in the U.S. and/or other countries. This website is a fan-made project and is not affiliated with, endorsed, sponsored, or specifically approved by Blizzard Entertainment. All original assets and content are property of their respective owners.
            </p>
        </div>
    </div>
    
    <div id="icon-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Select Icon</h3>
                <span style="cursor:pointer; font-size:1.2rem;" onclick="closeIconModal()">&times;</span>
            </div>
            
            <div class="modal-toolbar">
                <button id="btn-back" class="btn-back hidden" onclick="goBack()">« Back</button>
                <input type="text" id="icon-search" placeholder="Search..." oninput="handleSearch()">
            </div>

            <div id="icon-grid" class="icon-grid"></div>
        </div>
    </div>

    <script>
        let currentBase = 'item', currentEra = 'classic', currentBorder = 'retail', currentFont = 'retail';
        
        // --- NEW DATA STRUCTURE MATCHING YOUR FOLDERS ---
        // IMPORTANT: Paste your full list of filenames into these arrays!
        const ICON_LIBRARY = {
            "Abilities": [
                "1", "01_1", "01_2", "01_3", "01_4", "01_5", "2", "02_1", "02_2", "02_3", "3", "03_1", "03_2", "03_3", "4", "04_1", "04_2", "5", "05_1", "05_2", "6", "3seater", "3seater_1", "3seater_2", "Ability_Ambush", "Ability_BackStab", "Ability_BullRush", "Ability_CheapShot", "Ability_CriticalStrike", "Ability_Defend", "Ability_Devour", "Ability_Druid_AquaticForm", "Ability_Druid_Bash", "Ability_Druid_CatForm", "Ability_Druid_CatFormAttack", "Ability_Druid_ChallangingRoar", "Ability_Druid_Cower", "Ability_Druid_Dash", "Ability_Druid_DemoralizingRoar", "Ability_Druid_Disembowel", "Ability_Druid_Enrage", "Ability_Druid_Maul", "Ability_Druid_Rake", "Ability_Druid_Ravage", "Ability_Druid_SupriseAttack", "Ability_Druid_Swipe", "Ability_Druid_TravelForm", "Ability_DualWield", "Ability_Ensnare", "Ability_EyeOfTheOwl", "Ability_FiegnDead", "Ability_GhoulFrenzy", "Ability_GolemStormBolt", "Ability_GolemThunderClap", "Ability_Gouge", "Ability_Hibernation", "Ability_Hunter_AimedShot", "Ability_Hunter_AspectOfTheMonkey", "Ability_Hunter_BeastCall", "Ability_Hunter_BeastCall02", "Ability_Hunter_BeastSoothe", "Ability_Hunter_BeastTaming", "Ability_Hunter_BeastTraining", "Ability_Hunter_CriticalShot", "Ability_Hunter_EagleEye", "Ability_Hunter_MendPet", "Ability_Hunter_Pathfinding", "Ability_Hunter_Pet_Bat", "Ability_Hunter_Pet_Bear", "Ability_Hunter_Pet_Boar", "Ability_Hunter_Pet_Cat", "Ability_Hunter_Pet_Crab", "Ability_Hunter_Pet_Crocolisk", "Ability_Hunter_Pet_Gorilla", "Ability_Hunter_Pet_Hyena", "Ability_Hunter_Pet_Owl", "Ability_Hunter_Pet_Raptor", "Ability_Hunter_Pet_Scorpid", "Ability_Hunter_Pet_Spider", "Ability_Hunter_Pet_TallStrider", "Ability_Hunter_Pet_Turtle", "Ability_Hunter_Pet_Vulture", "Ability_Hunter_Pet_WindSerpent", "Ability_Hunter_Pet_Wolf", "Ability_Hunter_Quickshot", "Ability_Hunter_RunningShot", "Ability_Hunter_SniperShot", "Ability_Hunter_SwiftStrike", "Ability_ImpalingBolt", "Ability_Kick", "Ability_Marksmanship", "Ability_MeleeDamage", "Ability_Mount_BlackDireWolf", "Ability_Mount_BlackPanther", "Ability_Mount_JungleTiger", "Ability_Mount_MechaStrider", "Ability_Mount_MountainRam", "Ability_Mount_NightmareHorse", "Ability_Mount_PinkTiger", "Ability_Mount_Raptor", "Ability_Mount_RidingHorse", "Ability_Mount_Undeadhorse", "Ability_Mount_WhiteDireWolf", "Ability_Mount_WhiteTiger", "Ability_Parry", "Ability_Physical_Taunt", "Ability_PierceDamage", "Ability_PoisonArrow", "Ability_Poisons", "Ability_PoisonSting", "Ability_Racial_Avatar", "Ability_Racial_BearForm", "Ability_Racial_BloodRage", "Ability_Racial_Cannibalize", "Ability_Racial_ShadowMeld", "Ability_Racial_Ultravision", "Ability_Repair", "Ability_Rogue_Ambush", "Ability_Rogue_Disguise", "Ability_Rogue_Distract", "Ability_Rogue_DualWeild", "Ability_Rogue_Eviscerate", "Ability_Rogue_FeignDeath", "Ability_Rogue_Feint", "Ability_Rogue_Garrote", "Ability_Rogue_KidneyShot", "Ability_Rogue_Rupture", "Ability_Rogue_SliceDice", "Ability_Rogue_Sprint", "Ability_Rogue_Trip", "Ability_Sap", "Ability_Seal", "Ability_SearingArrow", "Ability_ShockWave", "Ability_ShootWand", "Ability_Smash", "Ability_Spy", "Ability_Stealth", "Ability_SteelMelee", "Ability_TheBlackArrow", "Ability_Throw", "Ability_ThunderBolt", "Ability_ThunderClap", "Ability_TownWatch", "Ability_Tracking", "Ability_TrueShot", "Ability_UpgradeMoonGlaive", "Ability_Vanish", "Ability_Warrior_BattleShout", "Ability_Warrior_Challange", "Ability_Warrior_Charge", "Ability_Warrior_Cleave", "Ability_Warrior_DecisiveStrike", "Ability_Warrior_DefensiveStance", "Ability_Warrior_Disarm", "Ability_Warrior_InnerRage", "Ability_Warrior_OffensiveStance", "Ability_Warrior_PunishingBlow", "Ability_Warrior_Revenge", "Ability_Warrior_Riposte", "Ability_Warrior_SavageBlow", "Ability_Warrior_ShieldBash", "Ability_Warrior_ShieldWall", "Ability_Warrior_Sunder", "Ability_Warrior_WarCry", "Ability_WarStomp", "Ability_Whirlwind", "AimedShot", "Albino", "Ambush", "Ambush_1", "AnimalHandler", "AquaticForm", "ArcaneBarrage", "ArtofWar", "AspectMastery", "AspectOfTheMonkey", "AspectoftheViper", "Assassinate", "Assassinate2", "Avatar", "Avoidance", "Azure", "Backdraft", "BackStab", "BalanceofPower", "Bash", "Bat", "BattleShout", "BeaconofLight", "Bear", "BearForm", "BeastCall", "BeastCall02", "BeastMastery", "BeastSoothe", "BeastTaming", "BeastTraining", "BeastWithin", "Berserk", "BigBlizzardBear", "Black", "BlackBattlestrider", "BlackDireWolf", "BlackPanther", "Black_1", "Black_2", "Black_3", "Bladestorm", "BladeTwisting", "BlessedHands", "BlessedMending", "BloodBath", "BloodFrenzy", "BloodNova", "BloodRage", "BloodSplatter", "Bloodsurge", "BloodyEye", "Blue", "BlueWindRider", "Blue_1", "Blue_2", "Blue_3", "Boar", "BrainFreeze", "Bronze", "Brown", "Brown_1", "BullRush", "BullRush_1", "Burnout", "Cannibalize", "Cat", "CatForm", "CatFormAttack", "CatlikeReflexes", "CelestialHorse", "Challange", "ChallangingRoar", "ChaosBolt", "Charge", "Charger", "CheapShot", "CheatDeath", "ChilledToTheBone", "Chimera", "ChimeraShot2", "CleanseSpirit", "Cleave", "CobraStrikes", "CockatriceMount", "CockatriceMountElite", "ColdAsIce", "CombatExperience", "CommandingShout", "ConjureFoodRank10", "ConjureFoodRank12", "ConjureFoodRank9", "ConjureWater11", "CoreHound", "Cower", "Crab", "CriticalBlock", "CriticalShot", "CriticalStrike", "Crocolisk", "Cursed", "CutToTheChase", "Cyclone", "Dash", "DeadenedNerves", "DeadlyBrew", "DecisiveStrike", "DeepFreeze", "Defend", "DefensiveStance", "DemolisherFlameCatapult", "DemolisherRam", "DemonicEmpowerment", "DemonicPower", "DEMORALIZINGROAR", "Devastate", "Devilsaur", "DeviousPoisons", "Devour", "Disarm", "DisarmingShot", "Disembowel", "Disembowel_1", "Disguise", "Dismantle", "Displacement", "Distract", "DivineStorm", "DragonHawk", "Dreadsteed", "Dreamstate", "DualWeild", "DualWield", "DualWieldSpecialization", "EagleEye", "EarthandSky", "EbonBlade", "EbonGryphon", "Eclipse", "EclipseOrange", "ElectroCharge", "EmpoweredImp", "EmpoweredRejuvination", "EmpoweredTouch", "EndlessRage", "EnlightenedJudgements", "Enrage", "Ensnare", "EnvelopingShadows", "Eradication", "EverlastingAffliction", "Eviscerate", "ExplosiveShot", "EyeOfTheOwl", "FanofKnives", "FeignDeath", "Feint", "FerociousBite", "FerociousInspiration", "FiegnDead", "FieryPayback", "FindWeakness", "FireandBrimstone", "FireStarter", "FleetFooted", "FlightForm", "Flourish", "FlyingCarpet", "FocusedAim", "FocusedAttacks", "FocusedRage", "ForceofNature", "FrostFireBolt", "FrostyFlyingCarpet", "FuriousResolve", "GaleWinds", "Garrote", "GaurdedbytheLight", "GhoulFrenzy", "GiftoftheEarthmother", "GoForTheThroat", "GoldenGryphon", "GolemStormBolt", "GolemThunderClap", "Gorilla", "Gouge", "Green", "GreenWindRider", "Green_1", "Green_2", "Grey", "Gyrocoptor", "GyrocoptorElite", "HammeroftheRighteous", "Harass", "Haunt", "HealingInstincts", "HeroicLeap", "Heroism", "Hibernation", "HonorAmongstThieves", "HotStreak", "HungerforBlood", "HunterVsWild", "HuntingParty", "Hyena", "ImpalingBolt", "ImprovedDemonicTactics", "ImprovedDisciplines", "ImprovedMoonkinForm", "ImprovedSoulLeech", "ImprovedSteadyShot", "ImprovedTracking", "ImprovedTreeForm", "IncantersAbsorbtion", "Incite", "InfectedWound", "InfusionofLight", "InnerRage", "IntensifyRage", "Intervene", "Invigeration", "INVISIBILITY", "JudgementBlue", "JudgementofthePure", "JudgementoftheWise", "JudgementRed", "JudgementsoftheJust", "JungleTiger", "Kick", "KidneyShot", "KillCommand", "KingoftheJungle", "KotoBrewfest", "Lacerate", "LaunchPlayer", "Lavalash", "LiquidPyrite _blue", "LiquidPyrite", "list.txt", "LivingBomb", "LoadSelfCatapult", "LockAndLoad", "Longevity", "LongShots", "LunarGuidance", "MagnificentFlyingCarpet", "ManaTree", "Mangle", "Mangle2", "MarkedForDeath", "Marksmanship", "MasterMarksman", "MasterOfSubtlety", "MastersCall", "MasterShapeshifter", "MasterTactitian", "Maul", "MechaStrider", "MeleeDamage", "MendPet", "Miling", "Misdirection", "MissileBarrage", "MOLTENARMOR", "MoltenCore", "Moth", "MountainRam", "MurderSpree", "NaturalPerfection", "NervesOfSteel", "NetherDrakeElite", "NetherdrakePurple", "NetherRay", "NetherWindPresence", "NightmareHorse", "Nourish", "OffensiveStance", "OilJets", "Owl", "OwlkinFrenzy", "Parry", "Pathfinding", "Pegasus", "PierceDamage", "PiercingShots", "PinkTiger", "PlagueBarrel", "PlayerLoaded", "PointofNoEscape", "PoisonArrow", "POISONS", "POISONSTING", "PotentSpirit", "PotentVenom", "PowertoWheels", "PredatoryInstincts", "PreyontheWeak", "PrimalAgression", "PrimalPrecision", "PrimalTenacity", "Proto", "PunishingBlow", "Purple", "Purple_1", "Purple_2", "Purple_3", "QuickRecovery", "Quickshot", "Rake", "RallyingCry", "Rampage", "rank1", "rank2", "rank3", "RapidKilling", "RapidRegeneration", "Raptor", "Raptor_1", "Ravage", "Ravager", "Raven", "Razorscale", "Readiness", "Red", "ReloadAmmo", "Repair", "Replenish", "Resourcefulness", "Revenge", "Rhino", "RidingElekk", "RidingElekkElite", "RidingHorse", "RighteousVengeance", "Riposte", "RocketBoost", "RocketMount", "RocketMount2", "RocketMountBlue", "RunningShot", "Rupture", "SacredCleansing", "Safeguard", "SanctifiedWrath", "Sap", "SavageBlow", "Scorpid", "SEAL", "SearingArrow", "SecondWind", "SeparationAnxiety", "SerpentSwiftness", "ShadowDance", "ShadowFlame", "ShadowMeld", "Shadowstep", "ShadowStrikes", "ShatteringThrow", "ShatterShield", "SheathofLight", "ShellShieldGenerator", "ShieldBash", "ShieldBreak", "ShieldGuard", "ShieldMastery", "ShieldoftheTemplar", "ShieldofVengeance", "ShieldReflection", "ShieldWall", "ShockWave", "Shockwave_1", "ShootWand", "SiegeEngineCannon", "SiegeEngineCharge", "SiegeEngineRam", "SilentHunter", "Silithid", "SinisterCalling", "SkinTeeth", "SlaughterfromtheShadows", "SliceDice", "Smash", "SnakeTrap", "SniperShot", "SniperTraining", "SnowyGryphon", "SonicShockwave", "SpectralTiger", "Spider", "Sporebat", "Sprint", "Spy", "StalwartProtector", "Starfall", "StayofExecution", "SteadyShot", "Stealth", "SteelMelee", "Stormstrike", "StrengthOfArms", "StudentOfTheMind", "Suffocate", "Sunder", "SupriseAttack", "SurpriseAttack", "SurvivalInstincts", "SwiftGreenWindRider", "SwiftPurpleWindRider", "SwiftRedWindRider", "SwiftRetribution", "SwiftStrike", "SwiftYellowWindRider", "Swipe", "SwordandBoard", "TallStrider", "Taunt", "TawnyWindRider", "TheBlackArrow", "ThrilloftheHunt", "Throw", "ThrowingSpecialization", "ThunderBolt", "ThunderClap", "TigersRoar", "TitansGrip", "TormentOfTheWeak", "TouchedbyLight", "TownWatch", "Tracking", "Trauma", "TravelForm", "TreeofLife", "TricksOftheTrade", "Trip", "TrueShot", "TurntheTables", "Turtle", "Twilight", "TwilightsWrath", "Typhoon", "Ultravision", "Undeadhorse", "UnfairAdvantage", "UnrelentingAssault", "UpgradeMoonGlaive", "Vanish", "VictoryRush", "Vigilance", "Vulture", "Warbringer", "WarCry", "WarHippogryph", "WarpStalker", "WarStomp", "Wasp", "WaterShield", "Waylay", "WeaponMastery", "Whirlwind", "White", "WhiteDireWolf", "WhiteTiger", "White_1", "White_2", "WildQuiver", "WindSerpent", "WintersGrasp", "Wolf", "WorldInFlames", "Worm", "WrongfullyAccused", "ZenArchery",
            ],
            "Armor": [
                "Chain.png", "Chain_01.png", "Chain_02.png", "Chain_03.png", "Chain_03_1.png", "Chain_04.png", "Chain_04_1.png", "Chain_05.png", "Chain_05_1.png", "Chain_06.png", "Chain_06_1.png", "Chain_07.png", "Chain_07_1.png", "Chain_08.png", "Chain_08_1.png", "Chain_09.png", "Chain_09_1.png", "Chain_10.png", "Chain_10_1.png", "Chain_11.png", "Chain_11_1.png", "Chain_12.png", "Chain_12_1.png", "Chain_13.png", "Chain_13_1.png", "Chain_15.png", "Chain_16.png", "Chain_17.png", "Cloth_01.png", "Cloth_01_1.png", "Cloth_01_2.png", "Cloth_02.png", "Cloth_02_1.png", "Cloth_02_2.png", "Cloth_03.png", "Cloth_03_1.png", "Cloth_03_2.png", "Cloth_04.png", "Cloth_04_1.png", "Cloth_04_2.png", "Cloth_05.png", "Cloth_05_1.png", "Cloth_05_2.png", "Cloth_06.png", "Cloth_06_1.png", "Cloth_06_2.png", "Cloth_07.png", "Cloth_07_1.png", "Cloth_07_2.png", "Cloth_08.png", "Cloth_08_1.png", "Cloth_08_2.png", "Cloth_09.png", "Cloth_09_1.png", "Cloth_09_2.png", "Cloth_10.png", "Cloth_10_1.png", "Cloth_10_2.png", "Cloth_11.png", "Cloth_11_1.png", "Cloth_11_2.png", "Cloth_12.png", "Cloth_12_1.png", "Cloth_12_2.png", "Cloth_13.png", "Cloth_13_1.png", "Cloth_13_2.png", "Cloth_14.png", "Cloth_14_1.png", "Cloth_14_2.png", "Cloth_15.png", "Cloth_15_1.png", "Cloth_15_2.png", "Cloth_16.png", "Cloth_16_1.png", "Cloth_16_2.png", "Cloth_17.png", "Cloth_17_1.png", "Cloth_17_2.png", "Cloth_18.png", "Cloth_18_1.png", "Cloth_18_2.png", "Cloth_19.png", "Cloth_19_1.png", "Cloth_19_2.png", "Cloth_20.png", "Cloth_20_1.png", "Cloth_20_2.png", "Cloth_21.png", "Cloth_21_1.png", "Cloth_21_2.png", "Cloth_22.png", "Cloth_22_1.png", "Cloth_22_2.png", "Cloth_23.png", "Cloth_23_1.png", "Cloth_23_2.png", "Cloth_24.png", "Cloth_24_1.png", "Cloth_24_2.png", "Cloth_25.png", "Cloth_25Black.png", "Cloth_25Green.png", "Cloth_25Purple.png", "Cloth_25_1.png", "Cloth_25_2.png", "Cloth_26.png", "Cloth_26_1.png", "Cloth_26_2.png", "Cloth_27.png", "Cloth_27_1.png", "Cloth_27_2.png", "Cloth_28.png", "Cloth_28_1.png", "Cloth_28_2.png", "CLOTH_29.png", "Cloth_29_1.png", "Cloth_29_2.png", "Cloth_30.png", "Cloth_30_1.png", "Cloth_30_2.png", "Cloth_31.png", "Cloth_31_1.png", "Cloth_32.png", "Cloth_32_1.png", "Cloth_32_2.png", "Cloth_33.png", "Cloth_33_1.png", "Cloth_34.png", "Cloth_34Black.png", "Cloth_34Green.png", "Cloth_34Purple.png", "Cloth_34_1.png", "Cloth_35.png", "Cloth_35_1.png", "Cloth_36.png", "Cloth_36_1.png", "Cloth_37.png", "Cloth_37_1.png", "Cloth_38.png", "Cloth_38_1.png", "Cloth_39.png", "Cloth_40.png", "Cloth_41.png", "Cloth_42.png", "Cloth_43.png", "Cloth_44.png", "Cloth_45.png", "Cloth_46.png", "Cloth_47.png", "Cloth_48.png", "Cloth_49.png", "Cloth_50.png", "Cloth_51.png", "Cloth_52.png", "Cloth_53.png", "Cloth_54.png", "Cloth_55.png", "Cloth_56.png", "Cloth_57.png", "Cloth_58.png", "Cloth_59.png", "Cloth_60.png", "Cloth_61.png", "Cloth_62.png", "Cloth_63.png", "Cloth_64.png", "Cloth_65.png", "Cloth_66.png", "Cloth_67.png", "CLOTH_68.png", "Cloth_69.png", "Cloth_70.png", "Cloth_71.png", "Cloth_72.png", "Cloth_73.png", "Cloth_74.png", "Cloth_75.png", "Cloth_77.png", "Cloth_78.png", "Cloth_78Black.png", "Cloth_78Green.png", "Cloth_78Purple.png", "Cloth_79.png", "Cloth_80.png", "Cloth_81.png", "Cloth_83.png", "Cloth_85.png", "Cloth_Gloves1.png", "Cloth_Gloves10.png", "Cloth_Gloves11.png", "Cloth_Gloves2.png", "Cloth_Gloves3.png", "Cloth_Gloves4.png", "Cloth_Gloves5.png", "Cloth_Gloves6.png", "Cloth_Gloves7.png", "Cloth_Gloves8.png", "Cloth_Gloves9.png", "Cloth_Head1.png", "Cloth_Head10.png", "Cloth_Head11.png", "Cloth_Head12.png", "Cloth_Head13.png", "Cloth_Head14.png", "Cloth_Head15.png", "Cloth_Head16.png", "Cloth_Head17.png", "Cloth_Head18.png", "Cloth_Head19.png", "Cloth_Head2.png", "Cloth_Head20.png", "Cloth_Head21.png", "Cloth_Head22.png", "Cloth_Head23.png", "Cloth_Head24.png", "Cloth_Head25.png", "Cloth_Head26.png", "Cloth_Head27.png", "Cloth_Head28.png", "Cloth_Head29.png", "Cloth_Head3.png", "Cloth_Head30.png", "Cloth_Head4.png", "Cloth_Head5.png", "Cloth_Head6.png", "Cloth_Head7.png", "Cloth_Head8.png", "Cloth_Head9.png", "Cloth_Shoulders1.png", "Cloth_Shoulders10.png", "Cloth_Shoulders11.png", "Cloth_Shoulders12.png", "Cloth_Shoulders13.png", "Cloth_Shoulders14.png", "Cloth_Shoulders15.png", "Cloth_Shoulders16.png", "Cloth_Shoulders17.png", "Cloth_Shoulders2.png", "Cloth_Shoulders3.png", "Cloth_Shoulders4.png", "Cloth_Shoulders5.png", "Cloth_Shoulders6.png", "Cloth_Shoulders7.png", "Cloth_Shoulders8.png", "Cloth_Shoulders9.png", "Fabric_01.png", "Fur.png", "Grey_01.png", "GuildTabard_01.png", "HaremMatron_D_01.png", "Helm_Plate_Naxxramas_RaidWarrior_C_01.png", "INV_Belt_01.png", "INV_Belt_02.png", "INV_Belt_03.png", "INV_Belt_04.png", "INV_Belt_05.png", "INV_Belt_06.png", "INV_Belt_07.png", "INV_Belt_08.png", "INV_Belt_09.png", "INV_Belt_10.png", "INV_Belt_11.png", "INV_Belt_12.png", "INV_Belt_13.png", "INV_Belt_14.png", "INV_Belt_15.png", "INV_Belt_16.png", "INV_Belt_17.png", "INV_Belt_18.png", "INV_Belt_19.png", "INV_Belt_20.png", "INV_Belt_21.png", "INV_Belt_22.png", "INV_Belt_23.png", "INV_Belt_24.png", "INV_Belt_25.png", "INV_Belt_26.png", "INV_Belt_27.png", "INV_Belt_28.png", "INV_Belt_29.png", "INV_Belt_30.png", "INV_Belt_31.png", "INV_Belt_32.png", "INV_Belt_33.png", "INV_Belt_34.png", "INV_Belt_35.png", "INV_Boots_01.png", "INV_Boots_02.png", "INV_Boots_03.png", "INV_Boots_04.png", "INV_Boots_05.png", "INV_Boots_06.png", "INV_Boots_07.png", "INV_Boots_08.png", "INV_Boots_09.png", "INV_Boots_Fabric_01.png", "INV_Boots_Plate_01.png", "INV_Boots_Plate_02.png", "INV_Boots_Plate_03.png", "INV_Boots_Plate_04.png", "INV_Boots_Plate_05.png", "INV_Boots_Plate_06.png", "INV_Boots_Plate_07.png", "INV_Boots_Plate_08.png", "INV_Boots_Plate_09.png", "INV_Boots_Wolf.png", "INV_Bracer_01.png", "INV_Bracer_02.png", "INV_Bracer_03.png", "INV_Bracer_04.png", "INV_Bracer_05.png", "INV_Bracer_06.png", "INV_Bracer_07.png", "INV_Bracer_08.png", "INV_Bracer_09.png", "INV_Bracer_10.png", "INV_Bracer_11.png", "INV_Bracer_12.png", "INV_Bracer_13.png", "INV_Bracer_14.png", "INV_Bracer_15.png", "INV_Bracer_16.png", "INV_Bracer_17.png", "INV_Bracer_18.png", "INV_Bracer_19.png", "INV_Chest_Chain.png", "INV_Chest_Chain_03.png", "INV_Chest_Chain_04.png", "INV_Chest_Chain_05.png", "INV_Chest_Chain_06.png", "INV_Chest_Chain_07.png", "INV_Chest_Chain_08.png", "INV_Chest_Chain_09.png", "INV_Chest_Chain_10.png", "INV_Chest_Chain_11.png", "INV_Chest_Chain_12.png", "INV_Chest_Chain_13.png", "INV_Chest_Chain_14.png", "INV_Chest_Chain_15.png", "INV_Chest_Chain_16.png", "INV_Chest_Chain_17.png", "INV_Chest_Cloth_01.png", "INV_Chest_Cloth_02.png", "INV_Chest_Cloth_03.png", "INV_Chest_Cloth_04.png", "INV_Chest_Cloth_05.png", "INV_Chest_Cloth_06.png", "INV_Chest_Cloth_07.png", "INV_Chest_Cloth_08.png", "INV_Chest_Cloth_09.png", "INV_Chest_Cloth_10.png", "INV_Chest_Cloth_11.png", "INV_Chest_Cloth_12.png", "INV_Chest_Cloth_13.png", "INV_Chest_Cloth_14.png", "INV_Chest_Cloth_15.png", "INV_Chest_Cloth_16.png", "INV_Chest_Cloth_17.png", "INV_Chest_Cloth_18.png", "INV_Chest_Cloth_19.png", "INV_Chest_Cloth_20.png", "INV_Chest_Cloth_21.png", "INV_Chest_Cloth_22.png", "INV_Chest_Cloth_23.png", "INV_Chest_Cloth_24.png", "INV_Chest_Cloth_25.png", "INV_Chest_Cloth_26.png", "INV_Chest_Cloth_27.png", "INV_Chest_Cloth_28.png", "INV_Chest_Cloth_29.png", "INV_Chest_Cloth_30.png", "INV_Chest_Cloth_31.png", "INV_Chest_Cloth_32.png", "INV_Chest_Cloth_33.png", "INV_Chest_Cloth_34.png", "INV_Chest_Cloth_35.png", "INV_Chest_Cloth_36.png", "INV_Chest_Cloth_37.png", "INV_Chest_Cloth_38.png", "INV_Chest_Cloth_39.png", "INV_Chest_Cloth_40.png", "INV_Chest_Cloth_41.png", "INV_Chest_Cloth_42.png", "INV_Chest_Cloth_43.png", "INV_Chest_Cloth_44.png", "INV_Chest_Cloth_45.png", "INV_Chest_Cloth_46.png", "INV_Chest_Cloth_47.png", "INV_Chest_Cloth_48.png", "INV_Chest_Cloth_49.png", "INV_Chest_Cloth_50.png", "INV_Chest_Cloth_51.png", "INV_Chest_Fur.png", "INV_Chest_Leather_01.png", "INV_Chest_Leather_02.png", "INV_Chest_Leather_03.png", "INV_Chest_Leather_04.png", "INV_Chest_Leather_05.png", "INV_Chest_Leather_06.png", "INV_Chest_Leather_07.png", "INV_Chest_Leather_08.png", "INV_Chest_Leather_09.png", "INV_Chest_Leather_10.png", "INV_Chest_Plate01.png", "INV_Chest_Plate02.png", "INV_Chest_Plate03.png", "INV_Chest_Plate04.png", "INV_Chest_Plate05.png", "INV_Chest_Plate06.png", "INV_Chest_Plate07.png", "INV_Chest_Plate08.png", "INV_Chest_Plate09.png", "INV_Chest_Plate10.png", "INV_Chest_Plate11.png", "INV_Chest_Plate12.png", "INV_Chest_Plate13.png", "INV_Chest_Plate14.png", "INV_Chest_Plate15.png", "INV_Chest_Plate16.png", "INV_Chest_Samurai.png", "INV_Chest_Wolf.png", "INV_Crown_01.png", "INV_Crown_02.png", "INV_Gauntlets_01.png", "INV_Gauntlets_03.png", "INV_Gauntlets_04.png", "INV_Gauntlets_05.png", "INV_Gauntlets_06.png", "INV_Gauntlets_07.png", "INV_Gauntlets_08.png", "INV_Gauntlets_09.png", "INV_Gauntlets_10.png", "INV_Gauntlets_11.png", "INV_Gauntlets_12.png", "INV_Gauntlets_13.png", "INV_Gauntlets_14.png", "INV_Gauntlets_15.png", "INV_Gauntlets_16.png", "INV_Gauntlets_17.png", "INV_Gauntlets_18.png", "INV_Gauntlets_19.png", "INV_Gauntlets_20.png", "INV_Gauntlets_21.png", "INV_Gauntlets_22.png", "INV_Gauntlets_23.png", "INV_Gauntlets_24.png", "INV_Gauntlets_25.png", "INV_Gauntlets_26.png", "INV_Gauntlets_27.png", "INV_Gauntlets_28.png", "INV_Gauntlets_29.png", "INV_Gauntlets_30.png", "INV_Gauntlets_31.png", "INV_Gauntlets_32.png", "INV_Helmet_01.png", "INV_Helmet_02.png", "INV_Helmet_03.png", "INV_Helmet_04.png", "INV_Helmet_05.png", "INV_Helmet_06.png", "INV_Helmet_08.png", "INV_Helmet_09.png", "INV_Helmet_10.png", "INV_Helmet_11.png", "INV_Helmet_12.png", "INV_Helmet_13.png", "INV_Helmet_14.png", "INV_Helmet_15.png", "INV_Helmet_16.png", "INV_Helmet_17.png", "INV_Helmet_18.png", "INV_Helmet_19.png", "INV_Helmet_20.png", "INV_Helmet_21.png", "INV_Helmet_22.png", "INV_Helmet_23.png", "INV_Helmet_24.png", "INV_Helmet_25.png", "INV_Helmet_26.png", "INV_Helmet_27.png", "INV_Helmet_28.png", "INV_Helmet_29.png", "INV_Helmet_30.png", "INV_Helmet_31.png", "INV_Helmet_32.png", "INV_Helmet_33.png", "INV_Helmet_34.png", "INV_Helmet_35.png", "INV_Helmet_36.png", "INV_Helmet_37.png", "INV_Helmet_38.png", "INV_Helmet_39.png", "INV_Helmet_40.png", "INV_Helmet_41.png", "INV_Helmet_42.png", "INV_Helmet_43.png", "INV_Helmet_44.png", "INV_Helmet_45.png", "INV_Helmet_46.png", "INV_Helmet_47.png", "INV_Helmet_48.png", "INV_Helmet_49.png", "INV_Helmet_50.png", "INV_Helmet_51.png", "INV_Helmet_52.png", "INV_Helmet_53.png", "INV_Helmet_54.png", "INV_Helmet_55.png", "INV_Helmet_56.png", "INV_Helmet_57.png", "INV_Helmet_58.png", "INV_Helmet_59.png", "INV_Helmet_60.png", "INV_Helmet_61.png", "INV_Helmet_62.png", "INV_Helmet_63.png", "INV_Helmet_64.png", "INV_Helmet_65.png", "INV_Jewelry_Amulet_01.png", "INV_Jewelry_Amulet_02.png", "INV_Jewelry_Amulet_03.png", "INV_Jewelry_Amulet_04.png", "INV_Jewelry_Amulet_05.png", "INV_Jewelry_Amulet_06.png", "INV_Jewelry_Amulet_07.png", "INV_Jewelry_Necklace_01.png", "INV_Jewelry_Necklace_02.png", "INV_Jewelry_Necklace_03.png", "INV_Jewelry_Necklace_04.png", "INV_Jewelry_Necklace_05.png", "INV_Jewelry_Necklace_06.png", "INV_Jewelry_Necklace_07.png", "INV_Jewelry_Necklace_08.png", "INV_Jewelry_Necklace_09.png", "INV_Jewelry_Necklace_10.png", "INV_Jewelry_Necklace_11.png", "INV_Jewelry_Ring_01.png", "INV_Jewelry_Ring_02.png", "INV_Jewelry_Ring_03.png", "INV_Jewelry_Ring_04.png", "INV_Jewelry_Ring_05.png", "INV_Jewelry_Ring_06.png", "INV_Jewelry_Ring_07.png", "INV_Jewelry_Ring_08.png", "INV_Jewelry_Ring_09.png", "INV_Jewelry_Ring_10.png", "INV_Jewelry_Ring_11.png", "INV_Jewelry_Ring_12.png", "INV_Jewelry_Ring_13.png", "INV_Jewelry_Ring_14.png", "INV_Jewelry_Ring_15.png", "INV_Jewelry_Ring_16.png", "INV_Jewelry_Ring_17.png", "INV_Jewelry_Ring_18.png", "INV_Jewelry_Ring_19.png", "INV_Jewelry_Ring_20.png", "INV_Jewelry_Ring_21.png", "INV_Jewelry_Ring_22.png", "INV_Jewelry_Ring_23.png", "INV_Jewelry_Ring_24.png", "INV_Jewelry_Ring_25.png", "INV_Jewelry_Ring_26.png", "INV_Jewelry_Ring_27.png", "INV_Jewelry_Ring_28.png", "INV_Jewelry_Ring_29.png", "INV_Jewelry_Ring_30.png", "INV_Jewelry_Ring_31.png", "INV_Jewelry_Ring_32.png", "INV_Jewelry_Ring_33.png", "INV_Jewelry_Talisman_01.png", "INV_Misc_Cape_01.png", "INV_Misc_Cape_02.png", "INV_Misc_Cape_03.png", "INV_Misc_Cape_04.png", "INV_Misc_Cape_05.png", "INV_Misc_Cape_06.png", "INV_Misc_Cape_07.png", "INV_Misc_Cape_08.png", "INV_Misc_Cape_09.png", "INV_Misc_Cape_10.png", "INV_Misc_Cape_11.png", "INV_Misc_Cape_12.png", "INV_Misc_Cape_13.png", "INV_Misc_Cape_14.png", "INV_Misc_Cape_15.png", "INV_Misc_Cape_16.png", "INV_Misc_Cape_17.png", "INV_Misc_Cape_18.png", "INV_Misc_Cape_19.png", "INV_Misc_Cape_20.png", "INV_Misc_Cape_21.png", "INV_Misc_Cape_22.png", "INV_Pants_01.png", "INV_Pants_02.png", "INV_Pants_03.png", "INV_Pants_04.png", "INV_Pants_05.png", "INV_Pants_06.png", "INV_Pants_07.png", "INV_Pants_08.png", "INV_Pants_09.png", "INV_Pants_10.png", "INV_Pants_11.png", "INV_Pants_12.png", "INV_Pants_13.png", "INV_Pants_14.png", "INV_Pants_Wolf.png", "INV_Shield_01.png", "INV_Shield_02.png", "INV_Shield_03.png", "INV_Shield_04.png", "INV_Shield_05.png", "INV_Shield_06.png", "INV_Shield_07.png", "INV_Shield_08.png", "INV_Shield_09.png", "INV_Shield_10.png", "INV_Shield_11.png", "INV_Shield_12.png", "INV_Shield_13.png", "INV_Shield_14.png", "INV_Shield_15.png", "INV_Shield_16.png", "INV_Shield_17.png", "INV_Shield_18.png", "INV_Shield_19.png", "INV_Shield_20.png", "INV_Shield_21.png", "INV_Shirt_01.png", "INV_Shirt_02.png", "INV_Shirt_03.png", "INV_Shirt_04.png", "INV_Shirt_05.png", "INV_Shirt_06.png", "INV_Shirt_07.png", "INV_Shirt_08.png", "INV_Shirt_09.png", "INV_Shirt_10.png", "INV_Shirt_11.png", "INV_Shirt_12.png", "INV_Shirt_13.png", "INV_Shirt_14.png", "INV_Shirt_15.png", "INV_Shirt_16.png", "INV_Shirt_17.png", "INV_Shirt_Black_01.png", "INV_Shirt_Blue_01.png", "INV_Shirt_Green_01.png", "INV_Shirt_Grey_01.png", "INV_Shirt_GuildTabard_01.png", "INV_Shirt_Orange_01.png", "INV_Shirt_Purple_01.png", "INV_Shirt_Red_01.png", "INV_Shirt_White_01.png", "INV_Shirt_Yellow_01.png", "INV_Shoulder_01.png", "INV_Shoulder_02.png", "INV_Shoulder_03.png", "INV_Shoulder_04.png", "INV_Shoulder_05.png", "INV_Shoulder_06.png", "INV_Shoulder_07.png", "INV_Shoulder_08.png", "INV_Shoulder_09.png", "INV_Shoulder_10.png", "INV_Shoulder_11.png", "INV_Shoulder_12.png", "INV_Shoulder_13.png", "INV_Shoulder_14.png", "INV_Shoulder_15.png", "INV_Shoulder_16.png", "INV_Shoulder_17.png", "INV_Shoulder_18.png", "INV_Shoulder_19.png", "INV_Shoulder_20.png", "INV_Shoulder_21.png", "INV_Shoulder_22.png", "INV_Shoulder_23.png", "INV_Shoulder_24.png", "INV_Shoulder_25.png", "INV_Shoulder_26.png", "INV_Shoulder_27.png", "INV_Shoulder_28.png", "INV_Shoulder_29.png", "INV_Shoulder_30.png", "INV_Shoulder_31.png", "Leather01.png", "Leather_01.png", "Leather_01_1.png", "Leather_02.png", "Leather_02_1.png", "Leather_02_2.png", "Leather_03.png", "Leather_03A.png", "Leather_03B.png", "Leather_03_1.png", "Leather_04.png", "Leather_04A.png", "Leather_04B.png", "Leather_04_1.png", "Leather_05.png", "Leather_05_1.png", "Leather_06.png", "Leather_06_1.png", "Leather_07.png", "Leather_07_1.png", "Leather_07_2.png", "Leather_08.png", "Leather_08_1.png", "Leather_09.png", "Leather_09_1.png", "Leather_10.png", "Leather_10_1.png", "Leather_11.png", "Leather_11_1.png", "Leather_12.png", "Leather_12_1.png", "Leather_13.png", "Leather_13_1.png", "Leather_14.png", "Leather_14_1.png", "Leather_15.png", "LEATHER_15_1.png", "Leather_16.png", "LEATHER_16_1.png", "Leather_17.png", "Leather_17A.png", "Leather_17B.png", "Leather_18.png", "Leather_18A.png", "Leather_18B.png", "Leather_19.png", "Leather_20.png", "Leather_21.png", "Leather_21_1.png", "Leather_22.png", "Leather_22_1.png", "Leather_23.png", "Leather_23_1.png", "Leather_24.png", "Leather_24_1.png", "Leather_25.png", "Leather_25_1.png", "LEATHER_26.png", "LEATHER_27.png", "Leather_28.png", "Leather_29A.png", "Leather_29B.png", "Leather_30A.png", "Leather_30B.png", "Leather_33.png", "Leather_34.png", "Leather_35.png", "Leather_36.png", "Leather_37.png", "Leather_8.png", "Leather_9.png", "Leather_Gloves1.png", "Leather_Gloves10.png", "Leather_Gloves2.png", "Leather_Gloves3.png", "Leather_Gloves4.png", "Leather_Gloves5.png", "Leather_Head1.png", "Leather_Head10.png", "Leather_Head11.png", "Leather_Head12.png", "Leather_Head13.png", "Leather_Head14.png", "Leather_Head15.png", "Leather_Head16.png", "Leather_Head17.png", "Leather_Head18.png", "Leather_Head19.png", "Leather_Head2.png", "Leather_Head3.png", "Leather_Head4.png", "Leather_Head5.png", "Leather_Head6.png", "Leather_Head7.png", "Leather_Head8.png", "Leather_Head9.png", "Leather_Shoulders1.png", "Leather_Shoulders10.png", "Leather_Shoulders11.png", "Leather_Shoulders14.png", "Leather_Shoulders15.png", "Leather_Shoulders2.png", "Leather_Shoulders3.png", "Leather_Shoulders4.png", "Leather_Shoulders5.png", "Leather_Shoulders6.png", "Leather_Shoulders7.png", "Leather_Shoulders8.png", "Leather_Shoulders9.png", "list.txt", "Mail_01.png", "Mail_01_1.png", "Mail_02.png", "MAIL_02_1.png", "Mail_02_2.png", "MAIL_03.png", "Mail_03_1.png", "MAIL_04.png", "Mail_04_1.png", "Mail_05.png", "Mail_05_1.png", "Mail_06.png", "Mail_06_1.png", "Mail_06_2.png", "Mail_07.png", "Mail_07_1.png", "Mail_07_2.png", "Mail_08.png", "Mail_08_1.png", "Mail_08_2.png", "Mail_09.png", "Mail_10.png", "Mail_10_1.png", "Mail_11.png", "Mail_11_1.png", "Mail_12.png", "Mail_12_1.png", "Mail_13.png", "Mail_13_1.png", "Mail_14.png", "Mail_15.png", "Mail_15_1.png", "Mail_16.png", "Mail_17.png", "Mail_18.png", "Mail_19.png", "Mail_20.png", "Mail_21.png", "MAIL_24.png", "MAIL_25.png", "Mail_26.png", "Mail_27.png", "Mail_28.png", "Mail_32.png", "Mail_33.png", "Mail_34.png", "Mail_35.png", "Mail_Gloves1.png", "Mail_Gloves2.png", "Mail_Gloves3.png", "Mail_Gloves4.png", "Mail_Gloves5.png", "Mail_Head1.png", "Mail_Head10.png", "Mail_Head11.png", "Mail_Head12.png", "Mail_Head13.png", "Mail_Head2.png", "Mail_Head3.png", "Mail_Head5.png", "Mail_Head6.png", "Mail_Head7.png", "Mail_Head8.png", "Mail_Head9.png", "Mail_Shoulders1.png", "Mail_Shoulders10.png", "Mail_Shoulders11.png", "Mail_Shoulders12.png", "Mail_Shoulders13.png", "Mail_Shoulders17.png", "Mail_Shoulders2.png", "Mail_Shoulders3.png", "Mail_Shoulders4.png", "Mail_Shoulders5.png", "Mail_Shoulders6.png", "Mail_Shoulders7.png", "Mail_Shoulders8.png", "Mail_Shoulders9.png", "Mail_Waist1.png", "Plate01.png", "Plate02.png", "Plate03.png", "Plate04.png", "Plate05.png", "Plate06.png", "Plate07.png", "Plate08.png", "Plate09.png", "Plate10.png", "Plate11.png", "Plate12.png", "Plate13.png", "Plate14.png", "Plate15.png", "Plate16.png", "Plate18.png", "Plate19.png", "Plate20.png", "Plate21.png", "Plate22.png", "Plate23.png", "Plate26.png", "Plate_01.png", "Plate_01_1.png", "Plate_02.png", "Plate_02_1.png", "Plate_03.png", "Plate_03_1.png", "Plate_04.png", "Plate_04_1.png", "Plate_05.png", "Plate_05_1.png", "Plate_06.png", "Plate_06_1.png", "Plate_07.png", "Plate_07_1.png", "Plate_08.png", "Plate_08_1.png", "Plate_09.png", "Plate_09_1.png", "Plate_10.png", "Plate_10_1.png", "Plate_11.png", "Plate_11_1.png", "Plate_12.png", "Plate_12_1.png", "Plate_13.png", "Plate_13_1.png", "Plate_14.png", "Plate_14_1.png", "Plate_15.png", "Plate_15_1.png", "Plate_16.png", "Plate_17.png", "Plate_18.png", "Plate_18_1.png", "Plate_19.png", "Plate_20.png", "Plate_21.png", "Plate_22.png", "PLATE_22_1.png", "PLATE_23.png", "Plate_23_1.png", "Plate_24.png", "Plate_24_1.png", "Plate_25.png", "Plate_25_1.png", "PLATE_26.png", "Plate_26_1.png", "PLATE_27.png", "Plate_28.png", "Plate_29.png", "Plate_30.png", "Plate_31.png", "Plate_32.png", "Plate_33.png", "Plate_34.png", "Plate_37.png", "Plate_Gloves1.png", "Plate_Gloves3.png", "Plate_Gloves4.png", "Plate_Gloves5.png", "Plate_Head1.png", "Plate_Head10.png", "Plate_Head11.png", "Plate_Head12.png", "Plate_Head13.png", "Plate_Head14.png", "Plate_Head15.png", "Plate_Head16.png", "Plate_Head17.png", "Plate_Head18.png", "Plate_Head19.png", "Plate_Head2.png", "Plate_Head20.png", "Plate_Head21.png", "Plate_Head3.png", "Plate_Head4.png", "Plate_Head5.png", "Plate_Head6.png", "Plate_Head7.png", "Plate_Head8.png", "Plate_Head_22.png", "Plate_Shoulders1.png", "Plate_Shoulders10.png", "Plate_Shoulders11.png", "Plate_Shoulders12.png", "Plate_Shoulders2.png", "Plate_Shoulders23.png", "Plate_Shoulders3.png", "Plate_Shoulders4.png", "Plate_Shoulders5.png", "Plate_Shoulders6.png", "Plate_Shoulders7.png", "Plate_Shoulders8.png", "Plate_Shoulders9.png", "Samurai.png", "Shield_Naxxramas_D_01.png", "Shield_Naxxramas_D_02.png", "Shoulder_Plate_Naxxramas_RaidWarrior_C_01.png", "Wolf.png", "Wolf_1.png", "Wolf_2.png", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "",
            ],
            "Items": [
                "inv_misc_food_15", "inv_drink_05", "inv_egg_01", "inv_misc_beer_01", 
                "inv_misc_bandage_01"
            ],
            "Misc": [
                "inv_misc_coin_01", "inv_fabric_purplefire_01", "inv_feather_04", 
                "inv_holiday_christmas_present_01", "inv_letter_15", "inv_mask_02", "inv_misc_candle_01"
            ],
            "Places": [
                // Paste places icons here
            ],
            "Spells": [
                "AbolishMagic", "AbominationExplosion", "Absolution", "Acid_01", "AgitatingTotem", "AncestralAwakening", "AncestralGuardian", "AnimateDead", "AntiMagicShell", "AntiMagicZone", "AntiShadow", "Arcane01", "Arcane02", "Arcane03", "Arcane04", "ArcaneIntellect", "ArcanePotency", "ArcaneResilience", "ArcaneTorrent", "ArcticWinds", "ArdentDefender", "ArmyOfTheDead", "AshesToAshes", "Aspiration", "AstralRecal", "AstralRecalGroup", "AstralShift", "AuraMastery", "AuraOfDarkness", "AuraOfLight", "AvengersShield", "AVENGINEWRATH", "BlackPlague", "BladedArmor", "Blast", "BlessedLife", "BlessedRecovery", "BlessedResillience", "BlessingOfAgility", "BlessingOfEternals", "BlessingOfProtection", "BlessingOfStamina", "BlessingOfStrength", "BlessingOfTheEternals", "BlindingHeal", "Blink", "BloodBoil", "BloodLust", "BloodPlague", "BloodPresence", "BloodTap", "BlueCano", "BlueFire", "BlueFireNova", "BlueFireward", "BlueFlameBolt", "BlueFlameBreath", "BlueFlameRing", "BlueFlameStrike", "BlueHellfire", "BlueImmolation", "BluePyroblast", "BlueRainOfFire", "BorrowedTime", "Brainwash", "Brilliance", "BrokenHeart", "BurningSpeed", "BurningSpirit", "Burnout", "Butcher", "Butcher2", "CallofBone", "CallStorm", "CarrionSwarm", "ChainLightning", "ChainsOfIce", "ChampionsBond", "ChampionsGrace", "ChargeNegative", "ChargePositive", "Charm", "Chastise", "ChillingArmor", "ChillingBlast", "ChillingBolt", "ChillTouch", "CircleOfRenewal", "ClassIcon", "ColdHearted", "ConeOfSilence", "ConjureManaJewel", "ConsumeMagic", "Contagion", "CorpseExplode", "CorrosiveBreath", "CreepingPlague", "Cripple", "Crusade", "CrusaderAura", "CrusaderStrike", "CrystalBall", "Curse", "CurseOfAchimonde", "CurseOfMannoroth", "CurseOfSargeras", "CurseOfTounges", "Cyclone", "DarkConviction", "DarkRitual", "DarkSummoning", "DeadofNight", "DeathAndDecay", "DeathCoil", "DeathPact", "DeathScream", "DeathsEmbrace", "DeathStrike", "DemonBreath", "DemonForm", "DemonicCircleSummon", "DemonicCircleTeleport", "DemonicEmpathy", "DemonicFortitude", "DemonicPact", "DemonicTactics", "DestructiveSoul", "DetectInvisibility", "DetectLesserInvisibility", "DevineAegis", "Devotion", "DEVOTIONAURA", "DevouringPlague", "DiseaseCleansingTotem", "DISPELMAGIC", "Dispersion", "DivineHymn", "DivineIllumination", "DivineIntervention", "DivineProvidence", "DivinePurpose", "DivineSpirit", "Dizzy", "Drink", "Dropall_01", "Dropall_02", "Dropall_03", "Drowsy", "DryadDispelMagic", "EarthBind", "EarthBindTotem", "EarthElemental_Totem", "EarthlivingWeapon", "Earthquake", "EarthShock", "ElementalAbsorption", "ELEMENTALDEVASTATION", "ElementalOath", "ElementalPrecision_1", "ElementalPrecision_2", "ElementalShields", "Elemental_Totem", "ElunesGrace", "EmotionAfraid", "EmotionAngry", "EmotionHappy", "EmotionSad", "EmpowerChampion", "EmpowerRuneBlade", "EmpowerRuneBlade2", "EnchantArmor", "EnchantWeapon", "EnslaveDemon", "EvilEye", "Excorcism", "Excorcism_02", "Explode_Ghoul", "EyeforanEye", "EyeOfTheStorm", "FaerieFire", "Fanaticism", "FarSight", "FeatherFall", "FelArmour", "Felcano", "FelFire", "FelFireNova", "FelFireward", "FelFlameBolt", "FelFlameBreath", "FelFlameRing", "FelFlameStrike", "FelHellfire", "FelImmolation", "FelMending", "FelPyroblast", "FelRainOfFire", "feralchargecat", "FeralSpirit", "FingerOfDeath", "Fire", "FireArmor", "Fireball", "Fireball02", "FireBolt", "FireBolt02", "FireResistanceTotem", "FistOfJustice", "FlameBlades", "FlameBolt", "FlameShock", "FlameTounge", "Flare", "FlashHeal", "FocusedMind", "FocusedPower", "Food", "ForceOfNature", "FreezingBreath", "Frost", "FrostArmor", "FrostArmor02", "FrostBlast", "Frostbolt", "FrostBolt02", "FrostBrand", "FrostFever", "FrostNova", "FrostPresence", "FrostResistanceTotem", "FrostShock", "FrostWard", "FrozenCore", "FrozenRuneWeapon", "Fumble", "GatherShadows", "GhostKey", "GiftEarthmother", "GiftoftheWaterSpirit", "GiftoftheWild", "Glacier", "Gnaw_Ghoul", "GreaterBlessingofKings", "GreaterBlessingofLight", "GreaterBlessingofSalvation", "GreaterBlessingofSanctuary", "GreaterBlessingofWisdom", "GreaterHeal", "GrimWard", "GroundingTotem", "GuardianSpirit", "GuardianWard", "HarmUndeadAura", "Haunting", "Heal", "Heal02", "HealingAura", "HealingFocus", "HealingTouch", "HealingWaveGreater", "HealingWaveLesser", "HEALINGWAY", "HellifrePVPCombatMorale", "HellifrePVPHonorHoldFavor", "HellifrePVPThrallmarFavor", "Heroism", "Hex", "HolyBolt", "HolyGuidance", "HolyNova", "HolyProtection", "HolySmite", "HopeAndGrace", "IceBoundFortitude", "IceClaw", "IceFloes", "IceShard", "IceShock", "IceStorm", "IceTouch", "IcyTalons", "Immolation", "ImpHolyConcentration", "ImpPhaseShift", "ImprovedEarthShield", "ImprovedResistanceAuras", "ImprovedStormstrike", "ImprovedVampiricEmbrace", "Incinerate", "InnerFire", "InsectSwarm", "InvisibilityTotem", "Invisibilty", "Lament", "LastingAffliction", "LastingAfflictions", "LastingDefense", "LavaBurst", "LavaFlow", "LavaSpawn", "LayOnHands", "LesserHeal", "LesserHeal02", "LesserInvisibilty", "LifeDrain", "LifeDrain02", "Lightning", "LightningBolt", "LightningBolt01", "LightningOverload", "LightningShield", "LightsGrace", "list.txt", "MaelstromWeapon", "MageArmor", "MagicalSentry", "MagicDamage", "MagicImmunity", "ManaBurn", "ManaFeed", "ManaGain", "ManaRecharge", "ManaRegenTotem", "ManaTap", "MassDispel", "MassTeleport", "MasterOfElements", "MentalQuickness", "Metamorphosis", "MeteorStorm", "MindBomb", "MindFreeze", "MindMastery", "MindRot", "MindShear", "MindSooth", "MindSteal", "MindTwisting", "MindVision", "MirrorImage", "Misery", "MoltenBlood", "MoonGlow", "MoonKey", "NatureBlessing", "NatureGuardian", "NatureResistanceTotem", "NaturesBlessing", "NaturesWrath", "NatureTouchDecay", "NatureTouchGrow", "NetherCloak", "NetherProtection", "NightOfTheDead", "NullifyDisease", "NullifyPoison", "NullifyPoison_02", "NullWard", "PainAndSuffering", "PainfulAfflictions", "PainSpike", "PainSupression", "PathOfFrost", "Penance", "Persecution", "PersuitofJustice", "PlagueCloud", "PlagueStrike", "PlayingWithFire", "PoisonCleansingTotem", "Polymorph", "PolymorphChicken", "PolymorphPig", "PolymorphRabbit", "Polymorph_Cow", "PortalDalaran", "PortalDarnassus", "PortalExodar", "PortalIronForge", "PortalOrgrimmar", "PortalShattrath", "PortalSilvermoon", "PortalStonard", "PortalStormWind", "PortalTheramore", "PortalThunderBluff", "PortalUnderCity", "Possession", "Power", "PowerInfusion", "PowerWordBarrier", "PowerWordShield", "PrayerOfFortitude", "PrayerOfHealing", "PrayerOfHealing02", "PrayerOfMendingtga", "PrayerofShadowProtection", "PrayerofSpirit", "Preservation", "PrismaticCloak", "ProclaimChampion", "ProclaimChampion_02", "ProtectionformNature", "PsychicHorrors", "PsychicScream", "PureOfHeart", "Purge", "Purify", "PurifyingPower", "Racial_Dwarf_FindTreasure", "Racial_Orc_BerserkerStrength", "Racial_Troll_Berserk", "RagingScream", "RainOfFire", "RaiseDead", "Rapture", "RavenForm", "Redemption", "Regenerate", "Regeneration", "Regeneration_02", "Reincarnation", "Rejuvenation", "RemoveCurse", "RemoveDisease", "Renew", "Requiem", "ResistMagic", "ResistNature", "Restoration", "Resurrection", "Retribution", "RetributionAura", "ReviveChampion", "RighteousFury", "RighteousnessAura", "Riptide", "RitualOfSacrifice", "RockBiter", "Rune", "RuneTap", "SacrificialShield", "ScourgeBuild", "ScourgeStrike", "SealOfBlood", "SealOfFire", "SealOfFury", "SealOfKings", "SealOfMight", "SealOfProtection", "SealOfRighteousness", "SealOfSacrifice", "SealOfSalvation", "SealOfValor", "SealOfVengeance", "SealOfWisdom", "SealOfWrath", "SearingLight", "SearingLightPriest", "SearingTotem", "SeedOfDestruction", "SelfDestruct", "SenseUndead", "Sentinal", "Serendipity", "Shadesofdarkness", "ShadeTrueSight", "ShadowandFlame", "ShadowBolt", "ShadowEmbrace", "Shadowfiend", "Shadowform", "Shadowfury", "ShadowMend", "ShadowPact", "ShadowPower", "ShadowWard", "ShadowWordDominate", "ShadowWordPain", "ShamanRage", "Silence", "SiphonMana", "SkinofEarth", "Skull", "Sleep", "Slow", "SlowingTotem", "SlowPoison", "SoothingKiss", "SoulBurn", "SoulGem", "SoulLeech", "SoulLeech_1", "SoulLeech_2", "SoulLeech_3", "SpectralSight", "SpectralTransformation", "SpellDeflection", "SpellWarding", "Spell_Arcane_Blink", "Spell_Arcane_PortalDarnassus", "Spell_Arcane_PortalIronForge", "Spell_Arcane_PortalOrgrimmar", "Spell_Arcane_PortalStormWind", "Spell_Arcane_PortalThunderBluff", "Spell_Arcane_PortalUnderCity", "Spell_Arcane_StarFire", "Spell_Arcane_TeleportDarnassus", "Spell_Arcane_TeleportIronForge", "Spell_Arcane_TeleportMoonglade", "Spell_Arcane_TeleportOrgrimmar", "Spell_Arcane_TeleportStormWind", "Spell_Arcane_TeleportThunderBluff", "Spell_Arcane_TeleportUnderCity", "Spell_Fire_EnchantWeapon", "Spell_Fire_Fire", "Spell_Fire_FireArmor", "Spell_Fire_Fireball", "Spell_Fire_Fireball02", "Spell_Fire_FireBolt", "Spell_Fire_FireBolt02", "Spell_Fire_FlameBlades", "Spell_Fire_FlameBolt", "Spell_Fire_FlameShock", "Spell_Fire_FlameTounge", "Spell_Fire_Flare", "Spell_Fire_Immolation", "Spell_Fire_Incinerate", "Spell_Fire_LavaSpawn", "Spell_Fire_MeteorStorm", "Spell_Fire_SealOfFire", "Spell_Fire_SearingTotem", "Spell_Fire_SelfDestruct", "Spell_Fire_SoulBurn", "Spell_Fire_SunKey", "Spell_Fire_Volcano", "Spell_Fire_WindsofWoe", "Spell_Frost_ChainsOfIce", "Spell_Frost_ChillingArmor", "Spell_Frost_ChillingBlast", "Spell_Frost_ChillingBolt", "Spell_Frost_FreezingBreath", "Spell_Frost_Frost", "Spell_Frost_FrostArmor", "Spell_Frost_FrostArmor02", "Spell_Frost_FrostBlast", "Spell_Frost_Frostbolt", "Spell_Frost_FrostBolt02", "Spell_Frost_FrostBrand", "Spell_Frost_FrostNova", "Spell_Frost_FrostShock", "Spell_Frost_FrostWard", "Spell_Frost_Glacier", "Spell_Frost_IceClaw", "Spell_Frost_IceShard", "Spell_Frost_IceShock", "Spell_Frost_IceStorm", "Spell_Frost_ManaBurn", "Spell_Frost_ManaRecharge", "Spell_Frost_Stun", "Spell_Frost_SummonWaterElemental", "Spell_Frost_WindWalkOn", "Spell_Frost_Wisp", "Spell_Frost_WizardMark", "Spell_Holy_AshesToAshes", "Spell_Holy_AuraOfLight", "Spell_Holy_BlessingOfAgility", "Spell_Holy_BlessingOfProtection", "Spell_Holy_BlessingOfStamina", "Spell_Holy_BlessingOfStrength", "Spell_Holy_Devotion", "Spell_Holy_DevotionAura", "Spell_Holy_DispelMagic", "Spell_Holy_DivineIntervention", "Spell_Holy_Dizzy", "Spell_Holy_Excorcism", "Spell_Holy_Excorcism_02", "Spell_Holy_FistOfJustice", "Spell_Holy_FlashHeal", "Spell_Holy_GreaterHeal", "Spell_Holy_HarmUndeadAura", "Spell_Holy_Heal", "Spell_Holy_Heal02", "Spell_Holy_HealingAura", "Spell_Holy_HolyBolt", "Spell_Holy_HolyProtection", "Spell_Holy_HolySmite", "Spell_Holy_InnerFire", "Spell_Holy_LayOnHands", "Spell_Holy_LesserHeal", "Spell_Holy_LesserHeal02", "Spell_Holy_MagicalSentry", "Spell_Holy_MindSooth", "Spell_Holy_MindVision", "Spell_Holy_NullifyDisease", "Spell_Holy_PowerWordShield", "Spell_Holy_PrayerOfHealing", "Spell_Holy_PrayerOfHealing02", "Spell_Holy_Purify", "Spell_Holy_Redemption", "Spell_Holy_RemoveCurse", "Spell_Holy_Renew", "Spell_Holy_Restoration", "Spell_Holy_Resurrection", "Spell_Holy_Retribution", "Spell_Holy_RetributionAura", "Spell_Holy_RighteousFury", "Spell_Holy_RighteousnessAura", "Spell_Holy_SealOfFury", "Spell_Holy_SealOfMight", "Spell_Holy_SealOfProtection", "Spell_Holy_SealOfRighteousness", "Spell_Holy_SealOfSacrifice", "Spell_Holy_SealOfSalvation", "Spell_Holy_SealOfValor", "Spell_Holy_SealOfWisdom", "Spell_Holy_SealOfWrath", "Spell_Holy_SearingLight", "Spell_Holy_SenseUndead", "Spell_Holy_Silence", "Spell_Holy_TurnUndead", "Spell_Holy_WordFortitude", "Spell_Ice_Lament", "Spell_Ice_MagicDamage", "Spell_Lightning_LightningBolt01", "Spell_Magic_FeatherFall", "Spell_Magic_LesserInvisibilty", "Spell_Magic_MageArmor", "Spell_Magic_PolymorphChicken", "Spell_Magic_PolymorphPig", "Spell_Misc_ConjureManaJewel", "Spell_Misc_Drink", "Spell_Misc_Food", "Spell_Nature_AbolishMagic", "Spell_Nature_Acid_01", "Spell_Nature_AgitatingTotem", "Spell_Nature_AncestralGuardian", "Spell_Nature_AstralRecal", "Spell_Nature_AstralRecalGroup", "Spell_Nature_BloodLust", "Spell_Nature_Brilliance", "Spell_Nature_CallStorm", "Spell_Nature_ChainLightning", "Spell_Nature_CorrosiveBreath", "Spell_Nature_CrystalBall", "Spell_Nature_Cyclone", "Spell_Nature_Drowsy", "Spell_Nature_DryadDispelMagic", "Spell_Nature_EarthBind", "Spell_Nature_EarthBindTotem", "Spell_Nature_Earthquake", "Spell_Nature_EarthShock", "Spell_Nature_EnchantArmor", "Spell_Nature_FaerieFire", "Spell_Nature_FarSight", "Spell_Nature_ForceOfNature", "Spell_Nature_GuardianWard", "Spell_Nature_HealingTouch", "Spell_Nature_HealingWaveGreater", "Spell_Nature_HealingWaveLesser", "Spell_Nature_InvisibilityTotem", "Spell_Nature_Invisibilty", "Spell_Nature_Lightning", "Spell_Nature_LightningBolt", "Spell_Nature_LightningShield", "Spell_Nature_MagicImmunity", "Spell_Nature_ManaRegenTotem", "Spell_Nature_MassTeleport", "Spell_Nature_MirrorImage", "Spell_Nature_MoonGlow", "Spell_Nature_MoonKey", "Spell_Nature_NaturesBlessing", "Spell_Nature_NaturesWrath", "Spell_Nature_NatureTouchDecay", "Spell_Nature_NatureTouchGrow", "Spell_Nature_NullifyDisease", "Spell_Nature_NullifyPoison", "Spell_Nature_NullifyPoison_02", "Spell_Nature_NullWard", "Spell_Nature_Polymorph", "Spell_Nature_Preservation", "Spell_Nature_ProtectionformNature", "Spell_Nature_Purge", "Spell_Nature_RavenForm", "Spell_Nature_Regenerate", "Spell_Nature_Regeneration", "Spell_Nature_Reincarnation", "Spell_Nature_Rejuvenation", "Spell_Nature_RemoveCurse", "Spell_Nature_RemoveDisease", "Spell_Nature_ResistMagic", "Spell_Nature_ResistNature", "Spell_Nature_RockBiter", "Spell_Nature_Sentinal", "Spell_Nature_Sleep", "Spell_Nature_Slow", "Spell_Nature_SlowingTotem", "Spell_Nature_SlowPoison", "Spell_Nature_SpiritArmor", "Spell_Nature_SpiritWolf", "Spell_Nature_StarFall", "Spell_Nature_StoneClawTotem", "Spell_Nature_StoneSkinTotem", "Spell_Nature_StrangleVines", "Spell_Nature_Strength", "Spell_Nature_StrengthOfEarthTotem02", "Spell_Nature_Swiftness", "Spell_Nature_Thorns", "Spell_Nature_ThunderClap", "Spell_Nature_TimeStop", "Spell_Nature_Tranquility", "Spell_Nature_UndyingStrength", "Spell_Nature_UnyeildingStamina", "Spell_Nature_Web", "Spell_Nature_Windfury", "Spell_Nature_WispHeal", "Spell_Nature_WispSplode", "Spell_Shadow_AbominationExplosion", "Spell_Shadow_AnimateDead", "Spell_Shadow_AntiMagicShell", "Spell_Shadow_AntiShadow", "Spell_Shadow_AuraOfDarkness", "Spell_Shadow_BlackPlague", "Spell_Shadow_BloodBoil", "Spell_Shadow_BurningSpirit", "Spell_Shadow_CallofBone", "Spell_Shadow_CarrionSwarm", "Spell_Shadow_Charm", "Spell_Shadow_ChillTouch", "Spell_Shadow_Contagion", "Spell_Shadow_CorpseExplode", "Spell_Shadow_CreepingPlague", "Spell_Shadow_Cripple", "Spell_Shadow_Curse", "Spell_Shadow_CurseOfAchimonde", "Spell_Shadow_CurseOfMannoroth", "Spell_Shadow_CurseOfSargeras", "Spell_Shadow_CurseOfTounges", "Spell_Shadow_DarkRitual", "Spell_Shadow_DarkSummoning", "Spell_Shadow_DeadofNight", "Spell_Shadow_DeathAndDecay", "Spell_Shadow_DeathCoil", "Spell_Shadow_DeathPact", "Spell_Shadow_DeathScream", "Spell_Shadow_DemonBreath", "Spell_Shadow_DetectInvisibility", "Spell_Shadow_DetectLesserInvisibility", "Spell_Shadow_EnslaveDemon", "Spell_Shadow_EvilEye", "Spell_Shadow_FingerOfDeath", "Spell_Shadow_Fumble", "Spell_Shadow_GatherShadows", "Spell_Shadow_GhostKey", "Spell_Shadow_GrimWard", "Spell_Shadow_Haunting", "Spell_Shadow_ImpPhaseShift", "Spell_Shadow_LifeDrain", "Spell_Shadow_LifeDrain02", "Spell_Shadow_ManaBurn", "Spell_Shadow_Metamorphosis", "Spell_Shadow_MindBomb", "Spell_Shadow_MindRot", "Spell_Shadow_MindSteal", "Spell_Shadow_NightOfTheDead", "Spell_Shadow_PlagueCloud", "Spell_Shadow_Possession", "Spell_Shadow_PsychicScream", "Spell_Shadow_RagingScream", "Spell_Shadow_RainOfFire", "Spell_Shadow_RaiseDead", "Spell_Shadow_Requiem", "Spell_Shadow_RitualOfSacrifice", "Spell_Shadow_SacrificialShield", "Spell_Shadow_ScourgeBuild", "Spell_Shadow_SealOfKings", "Spell_Shadow_ShadeTrueSight", "Spell_Shadow_ShadowBolt", "Spell_Shadow_Shadowform", "Spell_Shadow_ShadowPact", "Spell_Shadow_ShadowWard", "Spell_Shadow_ShadowWordDominate", "Spell_Shadow_ShadowWordPain", "Spell_Shadow_SiphonMana", "Spell_Shadow_SoothingKiss", "Spell_Shadow_SoulGem", "Spell_Shadow_SpectralSight", "Spell_Shadow_SummonFelHunter", "Spell_Shadow_SummonImp", "Spell_Shadow_SummonInfernal", "Spell_Shadow_SummonSuccubus", "Spell_Shadow_SummonVoidWalker", "Spell_Shadow_Teleport", "Spell_Shadow_Twilight", "Spell_Shadow_UnholyFrenzy", "Spell_Shadow_UnholyStrength", "Spell_Shadow_UnsummonBuilding", "Spell_Shadow_VampiricAura", "Spell_Totem_WardOfDraining", "SpiritArmor", "SpiritLink", "SpiritualGuidence", "SpiritWolf", "StarFall", "StarFire", "StaticShock", "Stoicism", "StoneClawTotem", "StoneSkinTotem", "StormEarthFire", "StormReach", "StrangleVines", "Strangulate", "Strength", "StrengthOfEarthTotem02", "StudentOfMagic", "Stun", "Subversion", "SummonChampion", "SummonDeathCharger", "SummonFelGuard", "SummonFelHunter", "SummonImp", "SummonInfernal", "SummonLightwell", "SummonSuccubus", "SummonVoidWalker", "SummonWaterElemental", "SummonWaterElemental_2", "SunKey", "SurgeOfLight", "Swiftness", "SymbolOfHope", "Teleport", "TeleportDalaran", "TeleportDarnassus", "TeleportExodar", "TeleportIronForge", "TELEPORTMOONGLADE", "TeleportOrgrimmar", "TeleportShattrath", "TeleportSilvermoon", "TeleportStonard", "TeleportStormWind", "TeleportTheramore", "TeleportThunderBluff", "TeleportUnderCity", "TestOfFaith", "Thorns", "Thrash_Ghoul", "ThunderClap", "ThunderStorm", "TidalWaves", "TimeStop", "TotemOfWrath", "TotemRecall", "ToW_SpiceCloud", "Tranquility", "TremorTotem", "TurnUndead", "Twilight", "TwistedFaith", "UndyingStrength", "UnholyFrenzy", "UnholyPresence", "UnholyStrength", "UnleashedRage", "UnrelentingStorm", "UnstableAffliction_1", "UnstableAffliction_2", "UnstableAffliction_3", "UnstableAfllictions", "UnsummonBuilding", "unused", "unused2", "UnyeildingStamina", "UnyieldingFaith", "VampiricAura", "Vendetta", "Vindication", "Volcano", "WardOfDraining", "WarsongBrutal", "WarsongFocus", "WeaponMastery", "Web", "Windfury", "WindsofWoe", "WindWalkOn", "Wisp", "WispHeal", "WispSplode", "WispSplodeGreen", "WizardMark", "WordFortitude", "WrathofAir _Totem",
            ],
            "Trade": [
                "inv_misc_gem_opal_01", "inv_misc_bone_01", "inv_misc_book_09", "inv_ingot_01", 
                "inv_kelloggs_zesty_mushrooms", "inv_misc_dust_02", "inv_misc_leatherscraps_01", 
                "inv_misc_monsterscales_01", "inv_misc_web_01"
            ],
            "Weapons": [
                "inv_mace_01", "inv_mace_02", "inv_sword_39", "inv_sword_04", "inv_sword_11", "inv_sword_27", 
                "inv_axe_04", "inv_axe_09", "inv_staff_13", "inv_staff_30", "inv_spear_05", 
                "inv_weapon_bow_07", "inv_weapon_crossbow_01"
            ]
        };

        let currentFolder = null; // null means we are at root (viewing folders)

        const RETAIL_STATS = ["Agility", "Strength", "Intellect", "Stamina", "Critical Strike", "Haste", "Mastery", "Versatility", "Leech", "Speed", "Avoidance"];
        const CLASSIC_STATS = ["Strength", "Intellect", "Agility", "Stamina", "Spirit", "Fire Resistance", "Nature Resistance", "Frost Resistance", "Shadow Resistance", "Arcane Resistance"];

        const CLASS_DATA = [
            { name: "Warrior", color: "#C79C6E", classic: true },
            { name: "Paladin", color: "#F58CBA", classic: true },
            { name: "Hunter", color: "#ABD473", classic: true },
            { name: "Rogue", color: "#FFF569", classic: true },
            { name: "Priest", color: "#FFFFFF", classic: true },
            { name: "Death Knight", color: "#C41F3B", classic: false },
            { name: "Shaman", color: "#0070DE", classic: true },
            { name: "Mage", color: "#69CCF0", classic: true },
            { name: "Warlock", color: "#9482C9", classic: true },
            { name: "Monk", color: "#00FF96", classic: false },
            { name: "Druid", color: "#FF7D0A", classic: true },
            { name: "Demon Hunter", color: "#A330C9", classic: false },
            { name: "Evoker", color: "#33937F", classic: false }
        ];

        window.onload = () => {
            // Default Mace Icon (Path Updated to 'Weapons')
            document.getElementById('display-icon').src = "public/icons/Weapons/inv_mace_01.png";
            
            renderStatInputs(); 
            renderClassInputs(); 
            handleCategoryChange(); 
            setEra('classic');
            setBorder('retail'); 
            setFont('retail'); 

            // Defaults
            const strChk = document.getElementById('chk-stat-Strength');
            if(strChk) { strChk.checked = true; toggleStatInput('Strength'); document.getElementById('val-stat-Strength').value = 10; }
            const intChk = document.getElementById('chk-stat-Intellect');
            if(intChk) { intChk.checked = true; toggleStatInput('Intellect'); document.getElementById('val-stat-Intellect').value = 10; }
            const fireChk = document.getElementById('chk-stat-FireResistance');
            if(fireChk) { fireChk.checked = true; toggleStatInput('FireResistance'); document.getElementById('val-stat-FireResistance').value = 15; }

            document.querySelectorAll('.chk-class-item').forEach(chk => {
                if(chk.value === 'Mage' || chk.value === 'Druid') chk.checked = true;
            });

            renderLibrary();
            updateTooltip();
        };
        
        // --- MODAL LOGIC ---
        function openIconModal() { 
            document.getElementById('icon-modal').classList.remove('hidden'); 
            document.getElementById('icon-search').focus(); 
            currentFolder = null;
            document.getElementById('icon-search').value = "";
            renderLibrary();
        }
        function closeIconModal() { document.getElementById('icon-modal').classList.add('hidden'); }
        window.onclick = e => { if (e.target == document.getElementById('icon-modal')) closeIconModal(); }

        function goBack() {
            currentFolder = null;
            document.getElementById('icon-search').value = "";
            renderLibrary();
        }

        function handleSearch() {
            renderLibrary();
        }

        function renderLibrary() {
            const grid = document.getElementById('icon-grid'); 
            grid.innerHTML = '';
            const backBtn = document.getElementById('btn-back');
            const term = document.getElementById('icon-search').value.toLowerCase();

            // VIEW 1: FOLDERS
            if (!currentFolder && !term) {
                backBtn.classList.add('hidden');
                
                Object.keys(ICON_LIBRARY).forEach(folderName => {
                    const div = document.createElement('div'); 
                    div.className = 'folder-option';
                    div.innerHTML = `<div class="folder-icon">📁</div><div>${folderName}</div>`;
                    div.onclick = () => { currentFolder = folderName; renderLibrary(); };
                    grid.appendChild(div);
                });
                return;
            }

            // VIEW 2: ICONS
            backBtn.classList.remove('hidden');

            let iconsToShow = [];
            
            if (term) {
                Object.keys(ICON_LIBRARY).forEach(folder => {
                    const matches = ICON_LIBRARY[folder].filter(icon => icon.toLowerCase().includes(term));
                    matches.forEach(m => iconsToShow.push({ name: m, folder: folder }));
                });
            } else {
                if (ICON_LIBRARY[currentFolder]) {
                    iconsToShow = ICON_LIBRARY[currentFolder].map(i => ({ name: i, folder: currentFolder }));
                }
            }

            if(iconsToShow.length === 0) {
                grid.innerHTML = '<div style="color:#666; padding:20px;">No icons found.</div>';
                return;
            }

            iconsToShow.forEach(item => {
                const div = document.createElement('div'); div.className = 'icon-option';
                // Path structure: public/icons/FOLDER/name.png
                const path = `public/icons/${item.folder}/${item.name}.png`;
                
                div.onclick = () => { 
                    document.getElementById('display-icon').src = path; 
                    closeIconModal(); 
                };
                
                const img = document.createElement('img'); 
                img.src = path;
                img.loading = "lazy";
                div.appendChild(img); grid.appendChild(div);
            });
        }
        
        function handleIconUpload() {
            const input = document.getElementById('inp-icon-file');
            if (input.files?.[0]) {
                const reader = new FileReader();
                reader.onload = e => document.getElementById('display-icon').src = e.target.result;
                reader.readAsDataURL(input.files[0]);
            }
        }

        function handleCategoryChange() {
            const cat = document.getElementById('inp-category').value;
            ['cat-armor', 'cat-weapon', 'cat-jewelry', 'cat-relic', 'cat-other'].forEach(id => {
                const el = document.getElementById(id);
                if(el) el.classList.add('hidden');
            });
            const selected = document.getElementById('cat-' + cat);
            if(selected) selected.classList.remove('hidden');
            updateTooltip();
        }

        function renderStatInputs() {
            const container = document.getElementById('stats-container'); container.innerHTML = ''; 
            const stats = (currentEra === 'classic') ? CLASSIC_STATS : RETAIL_STATS;
            stats.forEach(stat => {
                const safe = stat.replace(/\s+/g, '');
                const row = document.createElement('div'); row.className = 'stat-row';
                row.innerHTML = `<label class="stat-check"><input type="checkbox" id="chk-stat-${safe}" onchange="toggleStatInput('${safe}')">${stat}</label>
                    <input type="number" id="val-stat-${safe}" class="stat-input hidden" value="15" oninput="updateTooltip()">`;
                container.appendChild(row);
            });
            document.getElementById('classic-effect-helper').classList.toggle('hidden', currentEra !== 'classic');
        }

        function renderClassInputs() {
            const container = document.getElementById('class-selector-container'); container.innerHTML = '';
            CLASS_DATA.forEach(cls => {
                if(currentEra === 'classic' && !cls.classic) return;
                const label = document.createElement('label'); label.className = 'class-checkbox';
                label.innerHTML = `<input type="checkbox" class="chk-class-item" value="${cls.name}" data-color="${cls.color}" onchange="updateTooltip()"><span style="color:${cls.color}; margin-left:4px;">${cls.name}</span>`;
                container.appendChild(label);
            });
        }

        function toggleStatInput(safe) {
            const chk = document.getElementById(`chk-stat-${safe}`), inp = document.getElementById(`val-stat-${safe}`);
            if(!inp) return;
            inp.classList.toggle('hidden', !chk.checked); if(chk.checked) inp.focus();
            updateTooltip();
        }

        function addCustomStat() {
            const div = document.createElement('div'); div.className = 'custom-stat-row';
            div.innerHTML = `<input type="text" placeholder="+10" class="custom-val-input" oninput="updateTooltip()"><input type="text" placeholder="Stat" class="custom-name-input" oninput="updateTooltip()"><button class="btn-remove-stat" onclick="this.parentElement.remove(); updateTooltip()">×</button>`;
            document.getElementById('custom-stats-container').appendChild(div);
        }

        function setBase(type) { 
            currentBase = type; highlightGroup('group-base', type); 
            document.getElementById('fields-item').classList.toggle('hidden', type !== 'item');
            document.getElementById('fields-spell').classList.toggle('hidden', type === 'item');
            document.getElementById('group-quality').classList.toggle('hidden', type !== 'item');
            updateTooltip(); 
        }
        function setEra(era) { currentEra = era; highlightGroup('group-era', era === 'retail' ? 'modern' : 'classic'); renderStatInputs(); renderClassInputs(); updateTooltip(); }
        
        function setBorder(style) { 
            currentBorder = style; highlightGroup('group-border', style === 'retail' ? 'modern' : 'classic');
            const box = document.getElementById('tooltip-box');
            box.classList.remove('border-classic', 'border-retail'); box.classList.add('border-' + style);
            const wrapper = document.getElementById('tooltip-wrapper');
            wrapper.classList.remove('border-classic-icon', 'border-retail-icon'); wrapper.classList.add('border-' + style + '-icon');
            updateTooltip(); 
        }
        function setFont(style) { 
            currentFont = style; highlightGroup('group-font', style === 'retail' ? 'modern' : 'classic');
            const box = document.getElementById('tooltip-box');
            box.classList.remove('font-classic', 'font-retail'); box.classList.add('font-' + style);
            updateTooltip(); 
        }

        function highlightGroup(id, text) {
            document.querySelectorAll(`#${id} .btn-toggle`).forEach(b => b.classList.toggle('active', b.textContent.toLowerCase().includes(text)));
        }

        function addClassicEffect() {
            const type = document.getElementById('inp-classic-type').value, val = document.getElementById('inp-classic-val').value;
            if(!val) return;
            let text = "";
            switch(type) {
                case 'spell': text = `Equip: Increases damage and healing done by magical spells and effects by up to ${val}.`; break;
                case 'heal': text = `Equip: Increases healing done by spells and effects by up to ${val}.`; break;
                case 'spellcrit': text = `Equip: Improves your chance to get a critical strike with spells by ${val}%.`; break;
                case 'meleecrit': text = `Equip: Improves your chance to get a critical strike by ${val}%.`; break;
                case 'hit': text = `Equip: Improves your chance to hit by ${val}%.`; break;
                case 'dodge': text = `Equip: Increases your chance to dodge an attack by ${val}%.`; break;
                case 'parry': text = `Equip: Increases your chance to parry an attack by ${val}%.`; break;
                case 'block': text = `Equip: Increases your chance to block an attack by ${val}%.`; break;
                case 'mp5': text = `Equip: Restores ${val} mana per 5 sec.`; break;
                case 'ap': text = `Equip: +${val} Attack Power.`; break;
            }
            const area = document.getElementById('inp-effect'); area.value = (area.value ? area.value + "\n" : "") + text;
            updateTooltip();
        }

        function updateTooltip() {
            const name = document.getElementById('inp-name').value;
            const quality = document.getElementById('inp-quality').value;
            const titleEl = document.getElementById('display-name');
            titleEl.textContent = name;
            titleEl.className = 'tooltip-title ' + (currentBase === 'item' ? quality : 'line-gold');

            if(currentBase === 'item') {
                ['section-item-type', 'section-weapon', 'display-stats', 'display-binding'].forEach(id => {
                    const el = document.getElementById(id);
                    if(el) el.classList.remove('hidden');
                });
                ['section-spell-details', 'display-rank'].forEach(id => {
                    const el = document.getElementById(id);
                    if(el) el.classList.add('hidden');
                });
                
                const showIlvl = document.getElementById('chk-ilvl').checked;
                const ilvlEl = document.getElementById('display-ilvl');
                ilvlEl.classList.toggle('hidden', !showIlvl);
                ilvlEl.textContent = "Item Level " + document.getElementById('inp-ilvl').value;
                document.getElementById('display-binding').textContent = document.getElementById('inp-binding').value;
                
                const cat = document.getElementById('inp-category').value;
                let slot = "", sub = "", showArmor = false, showDmg = false;

                if(cat === 'armor') { 
                    slot = document.getElementById('inp-armor-slot').value; 
                    sub = document.getElementById('inp-armor-material').value; 
                    showArmor = true;
                } else if(cat === 'weapon') { 
                    sub = document.getElementById('inp-weapon-type').value; 
                    if (sub.includes('Two') || ["Polearm", "Staff", "Fishing Pole"].includes(sub)) slot = 'Two-Hand';
                    else if (["Bow", "Crossbow", "Gun", "Wand", "Thrown"].includes(sub)) slot = 'Ranged';
                    else slot = 'One-Hand';
                    showDmg = true; 
                    sub = sub.replace("One-Hand ", "").replace("Two-Hand ", "");
                } else if(cat === 'jewelry') {
                    slot = document.getElementById('inp-jewelry-type').value; sub = "";
                } else if(cat === 'relic') {
                    slot = "Relic"; sub = document.getElementById('inp-relic-type').value;
                } else if(cat === 'other') {
                    const oType = document.getElementById('inp-other-type').value;
                    if (oType === "Cloak") { slot = "Back"; sub = ""; showArmor = true; }
                    else if (oType === "Shield") { slot = "Off Hand"; sub = "Shield"; showArmor = true; }
                    else if (oType === "Held In Off-hand") { slot = "Held In Off-hand"; sub = ""; }
                    else if (oType === "Shirt") { slot = "Shirt"; sub = ""; }
                    else if (oType === "Tabard") { slot = "Tabard"; sub = ""; }
                    else { slot = ""; sub = "Miscellaneous"; }
                }

                document.getElementById('display-slot').textContent = slot; 
                document.getElementById('display-subtype').textContent = sub;
                document.getElementById('group-armor').classList.toggle('hidden', !showArmor);
                document.getElementById('group-weapon-stats').classList.toggle('hidden', !showDmg);
                
                const armorVal = document.getElementById('inp-armor').value, dArmor = document.getElementById('display-armor');
                if(showArmor && armorVal) { dArmor.classList.remove('hidden'); dArmor.textContent = `${armorVal} Armor`; } else dArmor.classList.add('hidden');
                
                const min = parseInt(document.getElementById('inp-dmg-min').value)||0, max = parseInt(document.getElementById('inp-dmg-max').value)||0, spd = parseFloat(document.getElementById('inp-speed').value)||1;
                if(showDmg && min > 0) {
                    document.getElementById('section-weapon').classList.remove('hidden');
                    document.getElementById('display-dmg').textContent = `${min} - ${max} Damage`;
                    document.getElementById('display-speed').textContent = `Speed ${spd.toFixed(2)}`;
                    const dpsEl = document.getElementById('display-dps');
                    const dpsVal = ((min + max) / 2 / spd).toFixed(1);
                    dpsEl.textContent = `(${dpsVal} damage per second)`;
                    dpsEl.classList.toggle('hidden', !document.getElementById('chk-show-dps').checked);
                } else document.getElementById('section-weapon').classList.add('hidden');

                let sHtml = "";
                const statsArr = (currentEra === 'classic' ? CLASSIC_STATS : RETAIL_STATS);
                statsArr.forEach(s => {
                    const safe = s.replace(/\s+/g, ''), chk = document.getElementById(`chk-stat-${safe}`);
                    if(chk?.checked) sHtml += `<div class="item-property">+${document.getElementById(`val-stat-${safe}`).value} ${s}</div>`;
                });
                document.querySelectorAll('.custom-stat-row').forEach(r => {
                    const v = r.querySelector('.custom-val-input').value, n = r.querySelector('.custom-name-input').value;
                    if(v && n) sHtml += `<div class="item-property">${v} ${n}</div>`;
                });
                document.getElementById('display-stats').innerHTML = sHtml;

                const sDisp = document.getElementById('display-sockets'); sDisp.innerHTML = "";
                const colors = { Red: "#f00", Yellow: "#ff0", Blue: "#06f", Green: "#0f0", Purple: "#a35", Orange: "#f80", Meta: "#fff" };
                document.querySelectorAll('.inp-socket').forEach(sel => {
                    if(sel.value) sDisp.innerHTML += `<div class="socket-row"><div class="socket-box" style="background:${colors[sel.value]}"></div>${sel.value} Socket</div>`;
                });
                const bCheck = document.getElementById('chk-socket-bonus').checked, bText = document.getElementById('inp-socket-bonus').value, bDisp = document.getElementById('display-socket-bonus');
                if(bCheck && bText) { bDisp.innerHTML = `Socket Bonus: ${bText}`; bDisp.classList.remove('hidden'); } else bDisp.classList.add('hidden');

            } else {
                ['section-item-type', 'section-weapon', 'display-stats', 'display-ilvl', 'display-binding', 'display-armor', 'display-durability'].forEach(id => {
                    const el = document.getElementById(id);
                    if(el) el.classList.add('hidden');
                });
                document.getElementById('display-sockets').innerHTML = ""; document.getElementById('display-socket-bonus').classList.add('hidden');
                document.getElementById('section-spell-details').classList.remove('hidden');
                const rankEl = document.getElementById('display-rank');
                if(currentEra === 'classic') { rankEl.classList.remove('hidden'); rankEl.textContent = document.getElementById('inp-rank').value; }
                else rankEl.classList.add('hidden');
                document.getElementById('display-cost').textContent = document.getElementById('inp-cost').value;
                document.getElementById('display-range').textContent = document.getElementById('inp-range').value;
                document.getElementById('display-cast').textContent = document.getElementById('inp-cast').value;
                document.getElementById('display-cd').textContent = document.getElementById('inp-cooldown').value;
            }
            
            if(currentBase === 'item') {
                const dv = document.getElementById('inp-durability').value, de = document.getElementById('display-durability');
                if(dv) { de.classList.remove('hidden'); de.textContent = `Durability ${dv}`; } else de.classList.add('hidden');
            }

            const trig = document.getElementById('inp-effect-trigger').value;
            let body = document.getElementById('inp-effect').value.replace(/\n/g, '<br>');
            const pref = body.startsWith("Equip:") || body.startsWith("Use:") || body.startsWith("Chance");
            document.getElementById('display-effect').innerHTML = (trig && !pref ? `<span>${trig}</span>` : "") + body;
            document.getElementById('display-effect').className = 'line-group ' + (currentBase === 'item' ? 'line-green' : 'line-gold');

            const clDisp = document.getElementById('display-classes'); let sel = [];
            document.querySelectorAll('.chk-class-item').forEach(c => { if(c.checked) sel.push(`<span style="color:${c.dataset.color}">${c.value}</span>`); });
            clDisp.innerHTML = sel.length ? 'Classes: ' + sel.join(', ') : ""; clDisp.classList.toggle('hidden', !sel.length);
            
            const req = document.getElementById('inp-req').value, rCheck = document.getElementById('chk-req').checked, rEl = document.getElementById('display-req');
            rEl.textContent = req; rEl.classList.toggle('hidden', !(req && rCheck));
            
            const fl = document.getElementById('inp-flavor').value, flEl = document.getElementById('display-flavor');
            flEl.textContent = fl;
            flEl.classList.toggle('hidden', !fl);
        }

        function downloadTooltip() {
            const node = document.getElementById('tooltip-render-area');
            html2canvas(node, { backgroundColor: null, scale: 2 }).then(canvas => {
                const link = document.createElement('a'); link.download = 'wow-tooltip.png'; link.href = canvas.toDataURL(); link.click();
            });
        }
    </script>
</body>
</html>